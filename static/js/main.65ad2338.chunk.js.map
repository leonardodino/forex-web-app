{"version":3,"sources":["utils/theme.tsx","constants.tsx","utils/fetch-with-timeout.tsx","api/fetch-rates.tsx","hooks/forex.tsx","utils/dinero.tsx","utils/redux.tsx","hooks/pockets.tsx","utils/style.tsx","components/GlobalStyle.tsx","hooks/online.tsx","components/Container.tsx","components/SectionHeader.tsx","components/NavBar.tsx","components/Select.tsx","components/Exchange/CurrencySelector.tsx","components/Exchange/InputFormatter.tsx","components/Exchange/Inputs.tsx","components/Exchange/FlipButton.tsx","components/Exchange/SubmitButton.tsx","components/Exchange/index.tsx","components/Pockets/Card.tsx","components/Pockets/index.tsx","components/ErrorPage.tsx","components/Routes.tsx","components/Footer.tsx","components/App.tsx","utils/react.tsx","service-worker.tsx","index.tsx"],"names":["MainColors","values","bg","white","fg","black","focus","borderRadius","functions","invert","_ref","Object","objectWithoutProperties","objectSpread","theme","invertProviderFn","Invert","_ref2","children","react_default","a","createElement","styled_components_browser_esm","Component","props","theme_Invert","_ref3","_ref4","_ref5","API_URL","concat","process","CURRENCIES","TIMED_OUT","Error","fetchWithTimeout","url","arguments","length","undefined","_ref$timeout","timeout","options","Promise","resolve","reject","id","setTimeout","fetch","then","res","clearTimeout","err","merger","acc","slicedToArray","input","rates","entries","forEach","output","rate","fetchRates","asyncToGenerator","regenerator_default","mark","_callee","currencies","list","_args","wrap","_context","prev","next","INTERVAL","join","sent","ok","t0","t1","status","text","t2","t3","call","t4","json","t5","abrupt","reduce","stop","apply","this","logError","_console","console","log","initialState","online","updated","Infinity","ForexContext","createContext","useForexState","_useContext","useContext","error","Provider","fn","_useState","useState","_useState2","state","setState","Date","now","useInterval","value","useForex","inputCurrency","outputCurrency","_useForexState","useCurrencyForex","currency","_useForexState2","allRates","key","outputKey","replace","createForex","hooks","format","dinero","precision","getPrecision","repeat","toFormat","toAmount","toFixed","parseInt","handleActions","reducerMap","handleReduxActions","bindActionCreators","actionCreators","dispatch","action","obj","defineProperty","init","_ref$amount","amount","Dinero","actions","exchange","createAction","reducer","_objectSpread3","_ref2$payload","payload","to","from","getCurrency","converted","multiply","getAmount","subtract","add","FundsContext","DispatchContext","useActions","bind","useFunds","useFund","_useReducer","useReducer","_useReducer2","funds","usePocket","usePockets","createPockets","toRGB","c","_ref2$element","element","_ref2$within","within","_ref2$selector","selector","getter","getFocusCss","getFocusSelector","base","GlobalStyle","createGlobalStyle","_templateObject","getOnlineStatus","navigator","onLine","useOnlineStatus","onlineStatus","setOnlineStatus","goOnline","useCallback","goOffline","useEffect","window","addEventListener","removeEventListener","Container","styled","div","withConfig","displayName","componentId","Wrapper","header","Title","h1","_ref$paddingBottom","paddingBottom","SectionHeader","components_Container","Flex","Badge","$root","document","querySelector","browserOnline","forexOnline","classList","components_SectionHeader","label","Field","select","Value","ChevronSVG","svg","p","size","Chevron","_ref$size","_ref$strokeWidth","strokeWidth","_ref$color","color","viewBox","stroke","d","Select","style","className","Select_Wrapper","Select_Chevron","CurrencySelector","_ref$currencies","components_Select","map","cleanup","str","isEquivalent","b","clean","beautify","indexOf","substr","split","r","parseFloat","Number","isNaN","toLocaleString","minimumFractionDigits","maximumFractionDigits","useGrouping","InputFormatter","forwardRef","ref","onChange","setText","target","rifm_esm","refuse","StyledContainer","RelativeWrapper","Input","Prefix","Transparent","span","InputLine","setCurrency","prefix","form","Inputs_Wrapper","Exchange_CurrencySelector","Exchange_InputFormatter","assign","maxLength","as","defaultProps","OutputLine","gap","button","StyledIcon","fill","points","x1","y1","x2","y2","Rate","FlipButton","FlipButton_Wrapper","type","AbsoluteButton","Absolute","disabled","Main","Content","Return","width","height","SubmitButton_Wrapper","SubmitButton_Return","source","_ref3$payload","_ref3$payload$rate","_ref5$payload","_ref5$payload$rate","divide","forex","_ref6","_ref7","_ref8","useForexInput","useRef","e","onFocus","usePrevious","current","selectRef","_ref9","_props$initialAmount","initialAmount","setFrom","setTo","other","_useForex","_useForex2","_useForex2$","_useForexForm","initialValue","forms","useForexForm","_useForexForm2","requested","reset","_usePocket","_usePocket2","available","overdraft","enabled","_ref10","_ref11","previousFrom","previousTo","useFocus","onSubmit","event","preventDefault","Inputs_InputLine","Exchange_FlipButton","onClick","Exchange_SubmitButton","padding","Currency","h3","Amount","ForexGroup","ForexWrapper","ForexCurrency","ForexRate","Header","Card_Flex","Forex","Link","PocketCard","fund","formatted","Card_Wrapper","Card_Header","Card_Forex","Row","CardWrapper","Pockets","_usePockets","Pockets_Wrapper","Card","_ref$children","ErrorPage_Wrapper","currencyRegex","exchangePath","get","renderExchange","params","match","history","react","Exchange","components_Pockets","Routes","react_router","sensitive","exact","strict","path","render","components_ErrorPage","GitHubIcon","display","fillRule","clipRule","Anchor","rel","href","Footer","Footer_Wrapper","Footer_StyledContainer","marginTop","Footer_GitHubIcon","margin","enhance","_len","Providers","Array","_key","factories","provider","createFactory","reduceRight","child","factory","wrapIn","PocketsProvider","ForexProvider","react_router_dom","basename","components_NavBar","components_Routes","components_Footer","isLocalhost","Boolean","location","hostname","registerValidSW","swUrl","config","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","pathname","replaceState","ReactDOM","components_App","getElementById","URL","origin","response","contentType","headers","ready","unregister","reload","checkValidServiceWorker"],"mappings":"6JAKYA,uIAEZ,IAAMC,EAAS,CACbC,GAAIF,EAAWG,MACfC,GAAIJ,EAAWK,MACfC,MAAO,UACPC,aAAc,WAIVC,EAAY,CAChBC,OAAQ,SAAAC,GAAA,IAAGR,EAAHQ,EAAGR,GAAIE,EAAPM,EAAON,GAAOH,EAAdU,OAAAC,EAAA,EAAAD,CAAAD,EAAA,oBAAAC,OAAAE,EAAA,EAAAF,CAAA,GACHH,EACAP,EAFG,CAGNC,GAAIE,EACJA,GAAIF,MAKFY,EAAKH,OAAAE,EAAA,EAAAF,CAAA,GAAQV,EAAWO,GAQxBO,EAAmB,SAACD,GAAD,OAAkBA,EAAML,OAAOK,IAE3CE,EAAS,SAAAC,GAAA,IAAGC,EAAHD,EAAGC,SAAH,OACpBC,EAAAC,EAAAC,cAACC,EAAA,EAAD,CAAeR,MAAOC,GAAmBG,IAG9BT,EAAS,SAIpBc,GAYA,OAViB,SAACC,GAAD,OACfL,EAAAC,EAAAC,cAACI,EAAD,KACEN,EAAAC,EAAAC,cAACE,EAAcC,MAWRjB,EAAe,SAAAmB,GAAA,OAAAA,EAAGZ,MAA4BP,cAC9CL,EAAK,SAAAyB,GAAA,OAAAA,EAAGb,MAA4BZ,IACpCE,EAAK,SAAAwB,GAAA,OAAAA,EAAGd,MAA4BV,4CCxDpCyB,EAAO,GAAAC,OAHHC,oDAGG,aAAAD,OAJJC,IAKHC,EAAa,CAAC,MAAO,MAAO,OCL5BC,EAAY,IAAIC,MAAM,iBAgBpBC,EAZU,SACvBC,GADuB,IAAA1B,EAAA2B,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAEmB,GAFnBG,EAAA9B,EAErB+B,eAFqB,IAAAD,EAEX,IAFWA,EAEFE,EAFE/B,OAAAC,EAAA,EAAAD,CAAAD,EAAA,oBAIvB,IAAIiC,QAAQ,SAACC,EAASC,GACpB,IAAMC,EAAKC,WAAW,kBAAMF,EAAOZ,IAAYQ,GAC/C,OAAOO,MAAMZ,EAAKM,GAASO,KACzB,SAAAC,GAAG,OAAKC,aAAaL,GAAKF,EAAQM,IAClC,SAAAE,GAAG,OAAKD,aAAaL,GAAKD,EAAOO,QCPjCC,EAAS,SAACC,EAAD5C,GAAiD,IAAAO,EAAAN,OAAA4C,EAAA,EAAA5C,CAAAD,EAAA,GAAnC8C,EAAmCvC,EAAA,GAA5BwC,EAA4BxC,EAAA,GAK9D,OAJAN,OAAO+C,QAAQD,GAAOE,QAAQ,SAAAjC,GAAoB,IAAAC,EAAAhB,OAAA4C,EAAA,EAAA5C,CAAAe,EAAA,GAAlBkC,EAAkBjC,EAAA,GAAVkC,EAAUlC,EAAA,GAC5C6B,IAAUI,IACdN,EAAG,GAAAxB,OAAI0B,EAAJ,KAAA1B,OAAa8B,IAAYC,KAEvBP,GAyBMQ,EAtBC,eAAAlC,EAAAjB,OAAAoD,EAAA,EAAApD,CAAAqD,EAAA5C,EAAA6C,KAAG,SAAAC,IAAA,IAAAC,EAAA1B,EAAA2B,EAAAlB,EAAAO,EAAAY,EAAAhC,UAAA,OAAA2B,EAAA5C,EAAAkD,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,UACjBN,EADiBE,EAAA/B,OAAA,QAAAC,IAAA8B,EAAA,GAAAA,EAAA,GACM,GACvB5B,EAFiB4B,EAAA/B,OAAA,QAAAC,IAAA8B,EAAA,GAAAA,EAAA,GAECK,MAEdP,EAAW7B,OAAS,GAJP,CAAAiC,EAAAE,KAAA,cAIgB,IAAIvC,MAAM,iCAJ1B,cAMXkC,EAAOD,EAAWQ,KAAK,KANZJ,EAAAE,KAAA,EAOCzB,EAAK,GAAAlB,OAAID,EAAJ,WAAAC,OAAqBsC,EAArB,WAAAtC,OAAmCsC,GAAQ,CAAE3B,YAPnD,UAOXS,EAPWqB,EAAAK,KAAA,CAAAL,EAAAE,KAAA,eAUD,IAAIvC,MAAM,yBAVT,WAaZgB,EAAI2B,GAbQ,CAAAN,EAAAE,KAAA,gBAAAF,EAAAO,GAaM5C,MAbNqC,EAAAQ,GAAA,IAAAjD,OAagBoB,EAAI8B,OAbpB,OAAAT,EAAAE,KAAA,GAasCvB,EAAI+B,OAb1C,cAAAV,EAAAW,GAAAX,EAAAK,KAAAL,EAAAY,GAAAZ,EAAAQ,GAAAjD,OAAAsD,KAAAb,EAAAQ,GAAAR,EAAAW,IAAA,IAAAX,EAAAO,GAAAP,EAAAY,IAAA,eAAAZ,EAAAc,GAeH1E,OAfG4D,EAAAE,KAAA,GAeyBvB,EAAIoC,OAf7B,WAAAf,EAAAgB,GAAAhB,EAAAK,MAeXnB,EAfWc,EAAAc,GAeI3B,QAfJ0B,KAAAb,EAAAc,GAAAd,EAAAgB,KAiBPjD,SAAW6B,EAAW7B,OAjBf,CAAAiC,EAAAE,KAAA,eAiB6B,IAAIvC,MAAM,uBAjBvC,eAAAqC,EAAAiB,OAAA,SAmBV/B,EAAMgC,OAAcpC,EAAQ,KAnBlB,yBAAAkB,EAAAmB,SAAAxB,MAAH,yBAAAtC,EAAA+D,MAAAC,KAAAvD,YAAA,GCNVwD,EAAW,eAAAC,EAAA,UAAuBA,EAAAC,SAAQC,IAARL,MAAAG,EAAAzD,YAQlC4D,EAA2B,CAAExC,MAAO,GAAIyC,QAAQ,EAAOC,SAAUC,OAEnD,SAACjC,GACnB,IAAMkC,EAAeC,wBAA0BL,GAEzCM,EAAgB,WAAM,IAAAC,EACgBC,qBAAWJ,GACrD,MAAO,CAAEH,OAFiBM,EAClBN,OACSC,QAFSK,EACVL,QACUO,MAFAF,EACDE,MACQjD,MAFP+C,EACM/C,MACQU,eAwC1C,MAAO,CAAEwC,SAhBiC,SAAAjF,GAAkB,IAxCpCkF,EAwCqB1F,EAAeQ,EAAfR,SAAe2F,EAChCC,mBAAqBb,GADWc,EAAApG,OAAA4C,EAAA,EAAA5C,CAAAkG,EAAA,GACnDG,EADmDD,EAAA,GAC5CE,EAD4CF,EAAA,GAW1D,OAnDsBH,EA4CL,WACf9C,EAAWK,GAAYlB,KACrB,SAAAQ,GAAK,OAAIwD,EAAS,CAAExD,QAAOyC,QAAQ,EAAMC,QAASe,KAAKC,SACvD,SAAAT,GAAK,OAAIO,EAAStG,OAAAE,EAAA,EAAAF,CAAA,GAAKqG,EAAN,CAAad,OAAQL,EAASa,GAAQA,cA/ClBU,YAAYR,EHHjC,KGG+C,GAoDjEzF,EAAAC,EAAAC,cAACgF,EAAaM,SAAd,CAAuBU,MAAOL,GAAQ9F,IAIvBoG,SArCF,SACfC,EACAC,GAC8D,IAAAC,EAClClB,IAApB9C,EADsDgE,EACtDhE,MAAUuD,EAD4CrG,OAAAC,EAAA,EAAAD,CAAA8G,EAAA,WAE9D,MAAO,CAAChE,EAAK,GAAA3B,OAAIyF,EAAJ,KAAAzF,OAAqB0F,IAAmBR,IAgC1BT,gBAAemB,iBA7BnB,SAACC,GAAqB,IAAAC,EACPrB,IAAvBsB,EAD8BD,EACrCnE,MAAoBuD,EADiBrG,OAAAC,EAAA,EAAAD,CAAAiH,EAAA,WAEvCnE,EAAQ9C,OAAO+C,QAAQmE,GAAUpC,OACrC,SAAChC,EAAD/C,GAAwB,IAAAO,EAAAN,OAAA4C,EAAA,EAAA5C,CAAAD,EAAA,GAAfoH,EAAe7G,EAAA,GAAV4C,EAAU5C,EAAA,GAChB8G,EAAYD,EAAIE,QAAJ,GAAAlG,OAAe6F,EAAf,KAA4B,IAE9C,OADIG,IAAQC,IAAWtE,EAAMsE,GAAalE,GACnCJ,GAET,IAEF,OAAO9C,OAAAE,EAAA,EAAAF,CAAA,CAAE8C,SAAUuD,KAsBQiB,CAAYjG,GAAnC2E,aAAauB,8BACb3B,EAAoC2B,EAApC3B,cAAemB,EAAqBQ,EAArBR,iBAERQ,IAAf,wBClEaC,EAAS,SAACC,GACrB,IAAMC,EAAYD,EAAOE,eACnBH,EAASE,EAAS,KAAAvG,OAAQ,IAAIyG,OAAOF,IAAe,IAC1D,OAAOD,EAAOI,SAASL,IAGZM,EAAW,SAAXA,EAAYpB,GAAkD,IAA1BgB,EAA0BhG,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAd,EAC3D,MAAqB,kBAAVgF,EAA2BoB,EAASpB,EAAMqB,QAAQL,IACtDM,SAAStB,EAAMW,QAAQ,IAAK,IAAK,qBCE7BY,EAAgB,SAC3BC,GAD2B,OAExBC,YAAmCD,EAAY,KAMvCE,EAAqB,SAChCC,EACAC,GAFgC,OAhBhCrC,EAqBE,SAAAsC,GAAM,OAAI,kBAAoBD,EAAYC,EAAMvD,WAAN,EAAAtD,cApB5C8G,EAqBEH,EAnBFrI,OAAO+C,QAAQyF,GAAK1D,OAClB,SAACnC,EAAD5C,GAAA,IAAAO,EAAAN,OAAA4C,EAAA,EAAA5C,CAAAD,EAAA,GAAOoH,EAAP7G,EAAA,GAAYoG,EAAZpG,EAAA,UAAAN,OAAAE,EAAA,EAAAF,CAAA,GAA6B2C,EAA7B3C,OAAAyI,EAAA,EAAAzI,CAAA,GAAmCmH,EAAMlB,EAAGS,MAC5C,IANc,IAChBT,EACAuC,GCIIE,EAAO,SAAA3I,GAAA,IACXyD,EADWzD,EACXyD,WADWmF,EAAA5I,EAEX6I,cAFW,IAAAD,EAEFb,ENLkB,KMGhBa,EAAA,OAOXnF,EAAWsB,OACT,SAACrE,EAAGuG,GAAJ,OAAAhH,OAAAE,EAAA,EAAAF,CAAA,GAAuBS,EAAvBT,OAAAyI,EAAA,EAAAzI,CAAA,GAA2BgH,EAAW6B,YAAO,CAAED,SAAQ5B,gBACvD,KAIE8B,EAAU,CAAEC,SAAUC,YAA8B,aAMpDC,EAAUhB,EAAajI,OAAAyI,EAAA,EAAAzI,CAAA,MAAAmB,OACvB2H,EAAQC,UAAa,SAAC1C,EAAD/F,GAA8C,IAAA4I,EAAAC,EAAA7I,EAApC8I,QAAWR,EAAyBO,EAAzBP,OAAQS,EAAiBF,EAAjBE,GAAInG,EAAaiG,EAAbjG,KAClDoG,EAAOV,EAAOW,cACdC,EAAYZ,EAAOa,SAASvG,GAAMwG,YACxC,OAAO1J,OAAAE,EAAA,EAAAF,CAAA,GACFqG,GADL6C,EAAA,GAAAlJ,OAAAyI,EAAA,EAAAzI,CAAAkJ,EAEGI,EAAOjD,EAAMiD,GAAMK,SAASf,IAF/B5I,OAAAyI,EAAA,EAAAzI,CAAAkJ,EAGGG,EAAKhD,EAAMgD,GAAIO,IAAIf,YAAO,CAAED,OAAQY,EAAWxC,SAAUqC,MAH5DH,SAQkB,SAAC1F,GACrB,IAAMqG,EAAelE,wBAA0B,IACzCmE,EAAkBnE,wBAA0B,MAY5CoE,EAAa,kBAAMC,EAAKlB,EAAShD,qBAAWgE,KAE5CG,EAAW,kBAAMnE,qBAAW+D,IAC5BK,EAAU,SAAClD,GAAD,OAAsBiD,IAAWjD,IAKjD,MAAO,CAAEhB,SAlBiC,SAAAjF,GAAkB,IAAfR,EAAeQ,EAAfR,SAAe4J,EAChCC,qBAAWnB,EAAS,CAAEzF,cAAckF,GADJ2B,EAAArK,OAAA4C,EAAA,EAAA5C,CAAAmK,EAAA,GACnDG,EADmDD,EAAA,GAC5C/B,EAD4C+B,EAAA,GAE1D,OACE7J,EAAAC,EAAAC,cAACoJ,EAAgB9D,SAAjB,CAA0BU,MAAO4B,GAC/B9H,EAAAC,EAAAC,cAACmJ,EAAa7D,SAAd,CAAuBU,MAAO4D,GAAQ/J,KAczB2J,UAASD,WAAUM,UAFpB,SAACvD,GAAD,MAA0B,CAACkD,EAAQlD,GAAW+C,MAEfS,WAH9B,iBAAsB,CAACP,IAAYF,MAGOA,cAGhCU,CAAcpJ,GAArC2E,aAAauB,8BAEbgD,GAAyDhD,EAAzDgD,UAAWC,GAA8CjD,EAA9CiD,eAA8CjD,EAAlC2C,QAAkC3C,EAAzB0C,SAAyB1C,EAAfwC,kBCjE5CW,GAAQ,SAACC,GAAD,MAAoB,CAAEjL,MAAO,QAASF,MAAO,eAAgBmL,IAc9DhL,GAIR,SAAAW,GAKC,IAJJH,EAIIG,EAJJH,MAIIyK,EAAAtK,EAHJuK,eAGI,IAAAD,EAHM,IAGNA,EAAAE,EAAAxK,EAFJyK,cAEI,IAAAD,KAAAE,EAAA1K,EADJ2K,SAEMC,EAhBY,SAACD,GAAD,OAA+B,SAAAlL,GAAA,IAAGI,EAAHJ,EAAGI,MAAH,8EAAAgB,OAG/C8J,EAH+C,6BAAA9J,OAGXhB,EAAMR,MAHK,SAgBlCwL,MADX,IAAAH,EAlBmB,SAACH,EAAiBE,GAAlB,SAAA5J,OACpB0J,EADoB,KAAA1J,OACT4J,EAAS,eAAiB,SAgB7BK,CAAiBP,EAASE,GACjCC,GAEJ,OAAO7K,EAAQ+K,EAAO,CAAE/K,UAAW+K,GAGxBG,GAAgB,SAAAtK,GAAA,IAAGZ,EAAHY,EAAGZ,MAAH,uBAAAgB,OACfuJ,GAAMnL,EAAG,CAAEY,WADI,mBAAAgB,OAEfuJ,GAAMjL,EAAG,CAAEU,WAFI,qBAAAgB,OAGb5B,EAAG,CAAEY,UAHQ,gBAAAgB,OAIlB1B,EAAG,CAAEU,UAJa,kKCzB7B,IAAMmL,GAAcC,YAAHC,KACQH,GACK5L,GCLxBgM,GAAkB,WACtB,QAA8B,qBAAdC,YAAkD,IAArBA,UAAUC,SAoB1CC,GAjBS,WAAM,IAAA1F,EACYC,mBAASsF,IADrBrF,EAAApG,OAAA4C,EAAA,EAAA5C,CAAAkG,EAAA,GACrB2F,EADqBzF,EAAA,GACP0F,EADO1F,EAAA,GAEtB2F,EAAWC,sBAAY,kBAAMF,GAAgB,IAAO,CAACA,IACrDG,EAAYD,sBAAY,kBAAMF,GAAgB,IAAQ,CAACA,IAW7D,OATAI,oBAAU,WAGR,OAFAC,OAAOC,iBAAiB,SAAUL,GAClCI,OAAOC,iBAAiB,UAAWH,GAC5B,WACLE,OAAOE,oBAAoB,SAAUN,GACrCI,OAAOE,oBAAoB,UAAWJ,KAEvC,CAACF,EAAUE,IAEPJ,GCXMS,GAPGC,IAAOC,IAAVC,WAAA,CAAAC,YAAA,YAAAC,YAAA,gBAAGJ,CAAH,8DCGTK,GAAUL,IAAOM,OAAVJ,WAAA,CAAAC,YAAA,yBAAAC,YAAA,YAAGJ,CAAH,QACTlB,IAQEyB,GAAQP,IAAOQ,GAAVN,WAAA,CAAAC,YAAA,uBAAAC,YAAA,YAAGJ,CAAH,qGAFc,SAAAxM,GAAA,IAAAiN,EAAAjN,EAAGkN,cAAH,gBAAAD,EAAmB,GAAnBA,IAkBVE,GARkB,SAAA5M,GAAA,IAAGC,EAAHD,EAAGC,SAAU0M,EAAb3M,EAAa2M,cAAkBpM,EAA/Bb,OAAAC,EAAA,EAAAD,CAAAM,EAAA,qCAC/BE,EAAAC,EAAAC,cAACkM,GAAY/L,EACXL,EAAAC,EAAAC,cAACyM,GAAD,KACE3M,EAAAC,EAAAC,cAACoM,GAAD,CAAOG,cAAeA,GAAgB1M,MClBtC6M,GAAOb,IAAOC,IAAVC,WAAA,CAAAC,YAAA,eAAAC,YAAA,gBAAGJ,CAAH,oEAMJc,GAAQd,IAAOC,IAAVC,WAAA,CAAAC,YAAA,gBAAAC,YAAA,gBAAGJ,CAAH,iJACW9M,EACHG,GAOb0N,GAAQC,SAASC,cAAc,SAoBtB1N,KAlBA,WACb,IAAM2N,EAAgB7B,KACN8B,EAAgB9H,IAAxBL,OACFA,EAASkI,GAAiBC,EAKhC,OAJAxB,oBAAU,WAER,GAAIoB,GAAO,OAAOA,GAAMK,UAAUpI,EAAS,SAAW,OAAO,YAC5D,CAACA,IAEF/E,EAAAC,EAAAC,cAACkN,GAAD,CAAeX,cAAe,GAC5BzM,EAAAC,EAAAC,cAAC0M,GAAD,KACE5M,EAAAC,EAAAC,cAAA,6BACE6E,GAAU/E,EAAAC,EAAAC,cAAC2M,GAAD,KAAQI,EAAgB,aAAe,wBC/BrDb,GAAUL,IAAOsB,MAAVpB,WAAA,CAAAC,YAAA,kBAAAC,YAAA,gBAAGJ,CAAH,sLACTlB,GACA1L,GAAM,CAAEoL,QAAQ,IAODnL,GAMbkO,GAAQvB,IAAOwB,OAAVtB,WAAA,CAAAC,YAAA,gBAAAC,YAAA,gBAAGJ,CAAH,wJAcLyB,GAAQzB,IAAOC,IAAVC,WAAA,CAAAC,YAAA,gBAAAC,YAAA,gBAAGJ,CAAH,oDAKL0B,GAAa1B,IAAO2B,IAAVzB,WAAA,CAAAC,YAAA,qBAAAC,YAAA,gBAAGJ,CAAH,sDACL,SAAA4B,GAAC,OAAIA,EAAEC,MACN,SAAAD,GAAC,OAAIA,EAAEC,OAKbC,GAAU,SAAAtO,GAAA,IAAAuO,EAAAvO,EAAGqO,YAAH,IAAAE,EAAU,GAAVA,EAAAC,EAAAxO,EAAcyO,mBAAd,IAAAD,EAA4B,IAA5BA,EAAAE,EAAA1O,EAAiC2O,aAAjC,IAAAD,EAAyC,eAAzCA,EAAA,OACdjO,EAAAC,EAAAC,cAACuN,GAAD,CAAYU,QAAQ,YAAYP,KAAMA,GACpC5N,EAAAC,EAAAC,cAAA,QAAMkO,OAAQF,EAAOF,YAAaA,EAAaK,EAAE,mBAatCC,GARA,SAAAxO,GAAA,IAAGyO,EAAHzO,EAAGyO,MAAOC,EAAV1O,EAAU0O,UAAcnO,EAAxBb,OAAAC,EAAA,EAAAD,CAAAM,EAAA,8BACbE,EAAAC,EAAAC,cAACuO,GAAD,CAASF,MAAOA,EAAOC,UAAWA,GAChCxO,EAAAC,EAAAC,cAACsN,GAAD,KAAQnN,EAAM6F,OACdlG,EAAAC,EAAAC,cAACoN,GAAUjN,GACXL,EAAAC,EAAAC,cAACwO,GAAD,QC7CWC,GARU,SAAApP,GAAA,IAAAqP,EAAArP,EAAGyD,kBAAH,IAAA4L,EAAgB/N,EAAhB+N,EAA+BvO,EAA/Bb,OAAAC,EAAA,EAAAD,CAAAD,EAAA,uBACvBS,EAAAC,EAAAC,cAAC2O,GAAWxO,EACT2C,EAAW8L,IAAI,SAAAtI,GAAQ,OACtBxG,EAAAC,EAAAC,cAAA,UAAQyG,IAAKH,EAAUN,MAAOM,EAAUzG,SAAUyG,iBCJlDuI,GAAU,SAACC,GAAD,OAAiBA,EAAInI,QAAQ,WAAY,KACnDoI,GAAe,SAAChP,EAAWiP,GAAZ,OAA0BH,GAAQ9O,KAAO8O,GAAQG,IAGzDlI,GAAS,SAACgI,GACrB,IAAMG,EAAQJ,GAAQC,GAEhBI,GACoB,IAAxBD,EAAME,QAAQ,KACVF,EAAMhO,OAAS,EAAf,GAAAR,OACKwO,EAAMG,OAAO,EAAGH,EAAMhO,OAAS,GADpC,KAAAR,OAC0CwO,EAAMG,QAAQ,IACtDH,EAHN,GAAAxO,OAIOwO,EAAMI,MAAM,KAAK,GAJxB,KAAA5O,OAI8BwO,EAAMI,MAAM,KAAK,GAAGD,OAAO,EAAG,IAExDE,EAAIC,WAAWL,GAErB,OAAIM,OAAOC,MAAMH,GAAW,OAErBA,EAAEI,eAAe,QAAS,CAC/BC,sBAAuB,EACvBC,sBAAuB,EACvBC,aAAa,KAsCFC,GAxBQC,qBACrB,SAAA1Q,EAAqD2Q,GAAQ,IAA1DhK,EAA0D3G,EAA1D2G,MAAOiK,EAAmD5Q,EAAnD4Q,SAAUpQ,EAAyCR,EAAzCQ,SAAyC2F,EACnCC,mBAASO,GAD0BN,EAAApG,OAAA4C,EAAA,EAAA5C,CAAAkG,EAAA,GACpD5B,EADoD8B,EAAA,GAC9CwK,EAD8CxK,EAAA,GAW3D,OARA8F,oBAAU,WACRuD,GAAanL,EAAMoC,IAAUiK,EAAS,CAAEE,OAAQ,CAAEnK,MAAOpC,MACxD,CAACA,IAEJ4H,oBAAU,WACRuD,GAAanL,EAAMoC,IAAUkK,EAAQpJ,GAAOd,KAC3C,CAACA,IAGFlG,EAAAC,EAAAC,cAACoQ,GAAA,EAAD,CACEpK,MAAOpC,EACPqM,SAAUC,EACVG,OAAQ,UACRvJ,OAAQA,GACRjH,SAAU,SAAAM,GAAK,OAAIN,EAASM,EAAO6P,QChDrC9D,GAAUL,IAAOC,IAAVC,WAAA,CAAAC,YAAA,kBAAAC,YAAA,YAAGJ,CAAH,qCACTlB,IAKE2F,GAAkBzE,YAAOD,IAAVG,WAAA,CAAAC,YAAA,0BAAAC,YAAA,YAAGJ,CAAH,iDAKf0E,GAAkB1E,IAAOC,IAAVC,WAAA,CAAAC,YAAA,0BAAAC,YAAA,YAAGJ,CAAH,uDAMf2E,GAAQ3E,IAAO1J,MAAV4J,WAAA,CAAAC,YAAA,gBAAAC,YAAA,YAAGJ,CAAH,yUACPlB,GASezL,GAWbuR,GAAS5E,YAAO2E,IAAVzE,WAAA,CAAAC,YAAA,iBAAAC,YAAA,YAAGJ,CAAH,iGAUN6E,GAAc7E,IAAO8E,KAAV5E,WAAA,CAAAC,YAAA,sBAAAC,YAAA,YAAGJ,CAAH,yCAWX+E,GAAqD,SAAAvR,GAAA,IACzDiH,EADyDjH,EACzDiH,SACAuK,EAFyDxR,EAEzDwR,YACAC,EAHyDzR,EAGzDyR,OACAC,EAJyD1R,EAIzD0R,KACG5Q,EALsDb,OAAAC,EAAA,EAAAD,CAAAD,EAAA,mDAOzDS,EAAAC,EAAAC,cAACgR,GAAY7Q,EACXL,EAAAC,EAAAC,cAACsQ,GAAD,KACExQ,EAAAC,EAAAC,cAACiR,GAAD,CAAkBjL,MAAOM,EAAU2J,SAAUY,IAC7C/Q,EAAAC,EAAAC,cAACkR,GAAmBH,EACjB,SAAC5O,EAAO6N,GAAR,OACClQ,EAAAC,EAAAC,cAACuQ,GAAD,KACEzQ,EAAAC,EAAAC,cAACwQ,GAADlR,OAAA6R,OAAA,GAAWJ,EAAU5O,EAArB,CAA4BiP,UAAW,GAAIpB,IAAKA,KAChDlQ,EAAAC,EAAAC,cAACyQ,GAAD,CAAQY,GAAG,OACRP,EADH,IACWhR,EAAAC,EAAAC,cAAC0Q,GAAD,KAAcvO,EAAM6D,cAS3C4K,GAAUU,aAAe,CAAER,OAAQ,UAEnC,IAAMS,GAAanS,EAAOwR,IAC1BW,GAAWD,aAAe,CAAER,OAAQ,KCxFpC,IAAMU,GAAM,WAINtF,GAAUL,IAAO4F,OAAV1F,WAAA,CAAAC,YAAA,sBAAAC,YAAA,YAAGJ,CAAH,+IACTlB,GACA1L,GAIWuS,GATA,YAWOzS,EACHG,GAoBbwS,GAAa7F,YAhBN,SAAAxM,GAAA,IAAA0O,EAAA1O,EAAG2O,aAAH,IAAAD,EAAW,eAAXA,EAAAF,EAAAxO,EAA2ByO,mBAA3B,IAAAD,EAAyC,EAAzCA,EAA+C1N,EAA/Cb,OAAAC,EAAA,EAAAD,CAAAD,EAAA,gCACXS,EAAAC,EAAAC,cAAA,MAAAV,OAAA6R,OAAA,CACElD,QAAQ,YACR0D,KAAK,OACLzD,OAAQF,EACRF,YAAaA,GACT3N,GAEJL,EAAAC,EAAAC,cAAA,YAAU4R,OAAO,mBACjB9R,EAAAC,EAAAC,cAAA,QAAM6R,GAAG,IAAIC,GAAG,KAAKC,GAAG,KAAKC,GAAG,MAChClS,EAAAC,EAAAC,cAAA,YAAU4R,OAAO,sBACjB9R,EAAAC,EAAAC,cAAA,QAAM6R,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,OACjClS,EAAAC,EAAAC,cAAA,QAAM6R,GAAG,IAAIC,GAAG,IAAIC,GAAG,IAAIC,GAAG,SAIlBjG,WAAA,CAAAC,YAAA,yBAAAC,YAAA,YAAGJ,CAAH,mEA/BC,oBAkCL2F,IAKNS,GAAOpG,IAAOC,IAAVC,WAAA,CAAAC,YAAA,mBAAAC,YAAA,YAAGJ,CAAH,oIAvCO,UA2Cc2F,GA5ChB,YA6CYzS,EACVyS,IAOXU,GAAa,SAAAtS,GAAyC,IAAtC4C,EAAsC5C,EAAtC4C,KAASrC,EAA6Bb,OAAAC,EAAA,EAAAD,CAAAM,EAAA,UAC1D,MAAoB,kBAAT4C,EAA0B,KAEnC1C,EAAAC,EAAAC,cAACmS,GAAD7S,OAAA6R,OAAA,CAASiB,KAAK,UAAajS,GACzBL,EAAAC,EAAAC,cAAC0R,GAAD,MACA5R,EAAAC,EAAAC,cAACiS,GAAD,KAAOzP,KASb,IAAM6P,GAAiBxG,YAAOqG,IAAVnG,WAAA,CAAAC,YAAA,6BAAAC,YAAA,YAAGJ,CAAH,uDAKpBqG,GAAWI,SAAW,SAAAjS,GAAA,IAAGiO,EAAHjO,EAAGiO,UAAWD,EAAdhO,EAAcgO,MAAUlO,EAAxBb,OAAAC,EAAA,EAAAD,CAAAe,EAAA,8BACpBP,EAAAC,EAAAC,cAACyM,GAAD,CAAW6B,UAAWA,EAAWD,MAAOA,GACtCvO,EAAAC,EAAAC,cAACqS,GAAmBlS,KAIT+R,UC/EThG,GAAUL,IAAO4F,OAAV1F,WAAA,CAAAC,YAAA,wBAAAC,YAAA,gBAAGJ,CAAH,0MACTlB,GACA1L,GAOcF,EAIN,SAAA0O,GAAC,OAAKA,EAAE8E,SAAW,UAAY,YAGrCC,GAAO3G,IAAOC,IAAVC,WAAA,CAAAC,YAAA,qBAAAC,YAAA,gBAAGJ,CAAH,qFAOJ4G,GAAU5G,IAAOC,IAAVC,WAAA,CAAAC,YAAA,wBAAAC,YAAA,gBAAGJ,CAAH,sBAIP6G,GAAS,SAAArT,GAAA,IAAAuO,EAAAvO,EAAGqO,YAAH,IAAAE,EAAU,GAAVA,EAAAC,EAAAxO,EAAcyO,mBAAd,IAAAD,EAA4B,KAA5BA,EAAAE,EAAA1O,EAAkC2O,aAAlC,IAAAD,EAA0C,eAA1CA,EAAA,OACbjO,EAAAC,EAAAC,cAAA,OACEiO,QAAQ,YACR0E,MAAOjF,EACPkF,OAAQlF,EACRI,YAAaA,EACb6D,KAAK,OACLzD,OAAQF,GAERlO,EAAAC,EAAAC,cAAA,QAAMmO,EAAE,mBACRrO,EAAAC,EAAAC,cAAA,QAAMmO,EAAE,8BAgBG/O,KAXM,SAAAQ,GAAA,IAAGC,EAAHD,EAAGC,SAAaM,EAAhBb,OAAAC,EAAA,EAAAD,CAAAM,EAAA,qBACnBE,EAAAC,EAAAC,cAAC6S,GAADvT,OAAA6R,OAAA,CAASiB,KAAK,UAAajS,GACzBL,EAAAC,EAAAC,cAACyM,GAAD,KACE3M,EAAAC,EAAAC,cAACwS,GAAD,KACE1S,EAAAC,EAAAC,cAACyS,GAAD,KAAU5S,GACVC,EAAAC,EAAAC,cAAC8S,GAAD,WCvBFvK,GAAmBhB,EAAqB,CAC5CtI,MAAO,SAAC0G,EAADtG,GAA0D,IAArC0T,EAAqC1T,EAAhDqJ,QAAWqK,OAC1B,OAAOzT,OAAAE,EAAA,EAAAF,CAAA,GAAKqG,EAAZ,CAAmBoN,YAErB5Q,MAAO,SAAAvC,EAAAS,GAGF,IAFKiP,EAEL1P,EAFD4C,KAECwQ,EAAA3S,EADDqI,QAAW1C,EACVgN,EADUhN,MACViN,EAAAD,EADiBxQ,YACjB,IAAAyQ,EADwB3D,EACxB2D,EACG9Q,EAAQgG,YAAO,CAAED,OAAQd,EAASpB,KAClCzD,EAASJ,EAAM4G,SAASvG,GAC9B,MAAO,CAAEuQ,OAAQ,QAASvQ,OAAML,QAAOI,WAEzCA,OAAQ,SAAAjC,EAAAC,GAGH,IAFK+O,EAELhP,EAFDkC,KAEC0Q,EAAA3S,EADDmI,QAAW1C,EACVkN,EADUlN,MACVmN,EAAAD,EADiB1Q,YACjB,IAAA2Q,EADwB7D,EACxB6D,EACG5Q,EAAS4F,YAAO,CAAED,OAAQd,EAASpB,KAEzC,MAAO,CAAE+M,OAAQ,SAAUvQ,OAAML,MADnBI,EAAO6Q,OAAO5Q,GACYD,WAE1C8Q,MAAO,SAAAC,EAAAC,GAGF,IAFDR,EAECO,EAFDP,OAAkBhM,EAEjBuM,EAFQP,GACEvQ,EACV+Q,EADD7K,QAAWlG,KAEb,OAAO+F,GAAQ,CAAE/F,QAAiB,CAChC4P,KAAMW,EACNrK,QAAS,CAAE1C,MAAOc,EAAOC,SAKzBiB,GAAO,SAAAwL,GAAA,IAAGxN,EAAHwN,EAAGxN,MAAOxD,EAAVgR,EAAUhR,KAAV,OACX+F,GAAQ,CAAE/F,OAAMuQ,OAAQ,SAAoB,CAC1CX,KAAM,QACN1J,QAAS,CAAE1C,YAGTyN,GAAgB,SAACrB,EAAczM,EAAciC,GAA7B,MAAqD,CACzEoI,IAAK0D,iBAAyB,MAC9B1N,MAAOc,EAAOnB,EAAMyM,IACpBnC,SAAU,SAAC0D,GAAD,OAAY/L,EAAS,CAAEwK,OAAM1J,QAAS,CAAE1C,MAAO2N,EAAExD,OAAOnK,UAClE4N,QAAS,kBAAMhM,EAAS,CAAEwK,KAAM,QAAS1J,QAAS,CAAEqK,OAAQX,QA6BxDyB,GAAc,SAAC7N,GACnB,IAAMgK,EAAM0D,mBAIZ,OAHAlI,oBAAU,WACRwE,EAAI8D,QAAU9N,IAETgK,EAAI8D,SAKPC,GAAY,SAAAC,GAAsC,IAAnCF,EAAmCE,EAAnCF,QAEdA,IACLA,EAAQ7U,QACR6U,EAAQzG,WAmEKjO,SA3CM,SAACe,GAA6B,IAAA8T,EACiB9T,EAA1D+T,qBADyC,IAAAD,EACzB,EADyBA,EACtBrL,EAAuCzI,EAAvCyI,KAAMuL,EAAiChU,EAAjCgU,QAASxL,EAAwBxI,EAAxBwI,GAAIyL,EAAoBjU,EAApBiU,MAAUC,EADP/U,OAAAC,EAAA,EAAAD,CACiBa,EADjB,iDAE3C4M,EAAgB7B,KAF2BoJ,EAGFrO,EAAS2C,EAAMD,GAHb4L,EAAAjV,OAAA4C,EAAA,EAAA5C,CAAAgV,EAAA,GAG1C9R,EAH0C+R,EAAA,GAAAC,EAAAD,EAAA,GAG1BvH,EAH0BwH,EAGlC3P,OAAqBQ,EAHamP,EAGbnP,MAHaoP,EAhE9B,SAACC,GAA2C,IAArBlS,EAAqBxB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAN,EACnD4D,EAAe,CAAEoB,MAAO0O,EAAclS,QADmBiH,EAErCC,qBAAWnB,GAAS3D,EAAcoD,IAFG2B,EAAArK,OAAA4C,EAAA,EAAA5C,CAAAmK,EAAA,GAExD9D,EAFwDgE,EAAA,GAEjD/B,EAFiD+B,EAAA,GAI/D6B,oBAAU,WAEY,kBAAThJ,GACXoF,EAAS,CAAEwK,KAAM,QAAS1J,QAAS,CAAElG,WACpC,CAACA,IAEJ,IAAMmS,EAAQ,CACZxS,MAAOsR,GAAc,QAAS9N,EAAOiC,GACrCrF,OAAQkR,GAAc,SAAU9N,EAAOiC,IAWzC,MAAO,CAACjC,EAAMxD,MARA,WAA0B,IAAzB6D,EAAyBhF,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAjB0T,EACrB9M,EAAS,CAAEwK,KAAM,QAAS1J,QAAS,CAAE1C,QAAOxD,UADN,IAErB2H,EAAYwK,EAAMhP,EAAMoN,QAAQ/C,IAAzC8D,QAEJ3J,GAASA,EAAQlL,SAIK0V,GA6CMC,CAAaV,EAAe1R,GAJbqS,EAAAvV,OAAA4C,EAAA,EAAA5C,CAAAmV,EAAA,GAI1CK,EAJ0CD,EAAA,GAI/BE,EAJ+BF,EAAA,GAIxBF,EAJwBE,EAAA,GAAAG,EAKfnL,GAAUjB,GALKqM,EAAA3V,OAAA4C,EAAA,EAAA5C,CAAA0V,EAAA,GAK1CE,EAL0CD,EAAA,GAK7B5M,EAL6B4M,EAAA,GAK7B5M,SACd8M,EAAYL,EAAU9L,YAAckM,EAAUlM,YAE9CoM,EADSrI,GAAiBC,IACL3H,IAAU8P,GAAaL,EAAU9L,YAAc,GA7B3D,SAAAqM,EAAAC,GAGZ,IAFDnT,EAECkT,EAFDlT,MAAOI,EAEN8S,EAFM9S,OACPqG,EACC0M,EADD1M,KAAMD,EACL2M,EADK3M,GAEF4M,EAAe1B,GAAYjL,GAC3B4M,EAAa3B,GAAYlL,GAE/B6C,oBAAU,WACR,OAAI+J,IAAiB3M,EAAamL,GAAU5R,EAAM6N,KAC9CwF,IAAe7M,EAAWoL,GAAUxR,EAAOyN,UAA/C,GACC,CAACpH,EAAMD,EAAIxG,EAAM6N,IAAKzN,EAAOyN,IAAKuF,EAAcC,IAqBnDC,CAASd,EAAOxU,GAiBhB,OACEL,EAAAC,EAAAC,cAAA,OAAAV,OAAA6R,OAAA,GAAUkD,EAAV,CAAiBqB,SAhBE,SAACC,GAEpB,GADAA,EAAMC,iBACDR,EAAL,CACA,IAAMlN,EAASC,YAAO,CAAED,OAAQ4M,EAAU9L,YAAa1C,SAAUsC,IACjEP,EAAS,CAAEM,KAAIT,SAAQ1F,SACvBuS,QAYEjV,EAAAC,EAAAC,cAAC6V,GAAD,CAAWvP,SAAUsC,EAAMiI,YAAasD,EAASpD,KAAM4D,EAAMxS,QAC7DrC,EAAAC,EAAAC,cAAC8V,GAAWxD,SAAZ,CAAqB9P,KAAMA,EAAMuT,QAVxB,SAACJ,GACZA,EAAMC,iBACN,IAAM9B,EAAU,CAAEnL,KAAIC,QACtBwL,EAAMN,EAAQlL,MACduL,EAAQL,EAAQnL,OAOd7I,EAAAC,EAAAC,cAACuR,GAAD,CAAYjL,SAAUqC,EAAIkI,YAAauD,EAAOrD,KAAM4D,EAAMpS,SAC1DzC,EAAAC,EAAAC,cAACgW,GAAD,CAAQzD,UAAW6C,GAChBD,EAAY,aAAe,eClK9Bc,GAAO,wCAEA/J,GAAUL,IAAOC,IAAVC,WAAA,CAAAC,YAAA,gBAAAC,YAAA,gBAAGJ,CAAH,4CACD3M,EACGH,GAGhB2N,GAAOb,IAAOC,IAAVC,WAAA,CAAAC,YAAA,aAAAC,YAAA,gBAAGJ,CAAH,8EACNlB,IAOEuL,GAAWrK,IAAOsK,GAAVpK,WAAA,CAAAC,YAAA,iBAAAC,YAAA,gBAAGJ,CAAH,mEAIDoK,IAGPG,GAASvK,IAAOC,IAAVC,WAAA,CAAAC,YAAA,eAAAC,YAAA,gBAAGJ,CAAH,8FAICoK,IAIPI,GAAaxK,YAAOa,IAAVX,WAAA,CAAAC,YAAA,mBAAAC,YAAA,gBAAGJ,CAAH,kEACe3M,EACCA,GAG1BoX,GAAezK,YAAOa,IAAVX,WAAA,CAAAC,YAAA,qBAAAC,YAAA,gBAAGJ,CAAH,sRACd5M,GAScF,EAIeG,EAGCA,GAO5BqX,GAAgB1K,IAAOC,IAAVC,WAAA,CAAAC,YAAA,sBAAAC,YAAA,gBAAGJ,CAAH,oEACNoK,IAKPO,GAAY3K,IAAOC,IAAVC,WAAA,CAAAC,YAAA,kBAAAC,YAAA,gBAAGJ,CAAH,qDACFoK,IAOPQ,GAAS,SAAApX,GAAA,IAAGiH,EAAHjH,EAAGiH,SAAU4B,EAAb7I,EAAa6I,OAAW/H,EAAxBb,OAAAC,EAAA,EAAAD,CAAAD,EAAA,8BACbS,EAAAC,EAAAC,cAACI,EAAD,KACEN,EAAAC,EAAAC,cAAC0W,GAASvW,EACRL,EAAAC,EAAAC,cAACkW,GAAD,KAAW5P,GACXxG,EAAAC,EAAAC,cAACoW,GAAD,KAASlO,MASf,IAAMyO,GAAQ,SAAA/W,GAAA,IAAGgJ,EAAHhJ,EAAGgJ,KAAMD,EAAT/I,EAAS+I,GAAInG,EAAb5C,EAAa4C,KAAb,OACZ1C,EAAAC,EAAAC,cAACsW,GAAD,CAAcjF,GAAIuF,IAAMjO,GAAE,aAAAlI,OAAemI,EAAf,KAAAnI,OAAuBkI,IAC/C7I,EAAAC,EAAAC,cAACuW,GAAD,KAAgB5N,GAChB7I,EAAAC,EAAAC,cAACwW,GAAD,KAAYhU,KA2BDqU,GArBI,SAAAxW,GAAyC,IAAtCyW,EAAsCzW,EAAtCyW,KAAS3W,EAA6Bb,OAAAC,EAAA,EAAAD,CAAAe,EAAA,UACpD0W,EAAYjQ,EAAOgQ,GACnBxQ,EAAWwQ,EAAKjO,cACdzG,EAAUiE,EAAiBC,GAA3BlE,MAIR,OACEtC,EAAAC,EAAAC,cAACgX,GAAY7W,EACXL,EAAAC,EAAAC,cAACiX,GAAD,CAAQ3Q,SAAUA,EAAU4B,OAAQ6O,MACjC3U,GACDtC,EAAAC,EAAAC,cAACqW,GAAD,KACG/W,OAAO+C,QAAQD,GAAOwM,IAAI,SAAAtO,GAAA,IAAAC,EAAAjB,OAAA4C,EAAA,EAAA5C,CAAAgB,EAAA,GAAEqI,EAAFpI,EAAA,GAAMiC,EAANjC,EAAA,UACzBT,EAAAC,EAAAC,cAACkX,GAAD,CAAOzQ,IAAKkC,EAAIC,KAAMtC,EAAUqC,GAAIA,EAAInG,KAAMA,SC7GpD0J,GAAUL,IAAOC,IAAVC,WAAA,CAAAC,YAAA,mBAAAC,YAAA,eAAGJ,CAAH,0BACTlB,IAIEwM,GAAMtL,IAAOC,IAAVC,WAAA,CAAAC,YAAA,eAAAC,YAAA,eAAGJ,CAAH,oVAkBDuL,IA2BOC,OApBC,SAAClX,GAAgD,IAAAmX,EAC/CxN,KAATF,EADwDtK,OAAA4C,EAAA,EAAA5C,CAAAgY,EAAA,MAE/D,OACExX,EAAAC,EAAAC,cAACuX,GAAYpX,EACXL,EAAAC,EAAAC,cAACkN,GAAD,gBACApN,EAAAC,EAAAC,cAACyM,GAAD,KACE3M,EAAAC,EAAAC,cAACmX,GAAD,KACG7X,OAAO+C,QAAQuH,GAAOgF,IAAI,SAAAvP,GAAA,IAAAO,EAAAN,OAAA4C,EAAA,EAAA5C,CAAAD,EAAA,GAAEiH,EAAF1G,EAAA,GAAYkX,EAAZlX,EAAA,UACzBE,EAAAC,EAAAC,cAACwX,GAAD,CAAY/Q,IAAKH,EAAUwQ,KAAMA,UCzCvC5K,GAAUL,IAAOC,IAAVC,WAAA,CAAAC,YAAA,qBAAAC,YAAA,eAAGJ,CAAH,iJACTlB,IAWWvL,KAFG,SAAAC,GAAA,IAAAoY,EAAApY,EAAGQ,gBAAH,IAAA4X,EAAc,IAAdA,EAAA,OAAwB3X,EAAAC,EAAAC,cAAC0X,GAAD,KAAU7X,KCR9C8X,GAAgBhX,EAAW2C,KAAK,KAChCsU,GAAY,mBAAAnX,OAAsBkX,GAAtB,UAAAlX,OAA4CkX,GAA5C,KAIZE,GAAM,SAAClE,GAAD,MAAoC,kBAANA,EAAiBA,EAAIA,EAAExD,OAAOnK,OAElE8R,GAAiB,SAAAzY,GAAwD,IAA5C0Y,EAA4C1Y,EAArD2Y,MAASD,OAAUE,EAAkC5Y,EAAlC4Y,QACrC7P,EAAU,CACd+L,QAAS,SAACR,GACR,IAAMhL,EAAKkP,GAAIlE,KAAOoE,EAAOpP,GAAKoP,EAAOnP,KAAOmP,EAAOpP,GACvDsP,EAAQtR,QAAR,aAAAlG,OAA6BoX,GAAIlE,GAAjC,KAAAlT,OAAuCkI,KAEzCyL,MAAO,SAACT,GACN,IAAM/K,EAAOiP,GAAIlE,KAAOoE,EAAOnP,KAAOmP,EAAOpP,GAAKoP,EAAOnP,KACzDqP,EAAQtR,QAAR,aAAAlG,OAA6BmI,EAA7B,KAAAnI,OAAqCoX,GAAIlE,OAG7C,OACE7T,EAAAC,EAAAC,cAACkY,EAAA,SAAD,KACEpY,EAAAC,EAAAC,cAACmY,GAAD7Y,OAAA6R,OAAA,GAAc4G,EAAY3P,IAC1BtI,EAAAC,EAAAC,cAACoY,GAAD,QAaSC,GARA,kBACbvY,EAAAC,EAAAC,cAACsY,GAAA,EAAD,KACExY,EAAAC,EAAAC,cAACsY,GAAA,EAAD,CAAOC,WAAS,EAACC,OAAK,EAACC,QAAM,EAACC,KAAMd,GAAce,OAAQb,KAC1DhY,EAAAC,EAAAC,cAACsY,GAAA,EAAD,CAAUE,OAAK,EAAC5P,KAAK,IAAID,GAAG,sBAC5B7I,EAAAC,EAAAC,cAACsY,GAAA,EAAD,CAAOK,OAAQ,kBAAM7Y,EAAAC,EAAAC,cAAC4Y,GAAD,WC3BnBC,GAAa,SAAAxZ,GAAA,IAAAuO,EAAAvO,EACjBqO,YADiB,IAAAE,EACV,GADUA,EAAAG,EAAA1O,EAEjB2O,aAFiB,IAAAD,EAET,eAFSA,EAGjBM,EAHiBhP,EAGjBgP,MACGlO,EAJcb,OAAAC,EAAA,EAAAD,CAAAD,EAAA,iCAMjBS,EAAAC,EAAAC,cAAA,MAAAV,OAAA6R,OAAA,CACEwB,MAAOjF,EACPkF,OAAQlF,EACRO,QAAQ,YACR0D,KAAM3D,GACF7N,EALN,CAMEkO,MAAK/O,OAAAE,EAAA,EAAAF,CAAA,CAAIwZ,QAAS,SAAYzK,KAE9BvO,EAAAC,EAAAC,cAAA,QACE+Y,SAAS,UACTC,SAAS,UACT7K,EAAE,41BAWFjC,GAAUL,IAAOC,IAAVC,WAAA,CAAAC,YAAA,kBAAAC,YAAA,YAAGJ,CAAH,0CACTlB,IAKE2F,GAAkBzE,YAAOD,IAAVG,WAAA,CAAAC,YAAA,0BAAAC,YAAA,YAAGJ,CAAH,oEAMfoN,GAASpN,YAjBkC,SAAAjM,GAAsB,IAAnB+I,EAAmB/I,EAAnB+I,GAAOxI,EAAYb,OAAAC,EAAA,EAAAD,CAAAM,EAAA,QAErE,OAAOE,EAAAC,EAAAC,cAAA,IAAAV,OAAA6R,OAAA,GAAOhR,EADA,CAAEgQ,OAAQ,SAAU+I,IAAK,uBAChC,CAAyBC,KAAMxQ,EAAI9I,SAAUM,EAAMN,cAehDkM,WAAA,CAAAC,YAAA,iBAAAC,YAAA,YAAGJ,CAAH,+HACR5M,GAMeC,GAeJka,GAXA,kBACbtZ,EAAAC,EAAAC,cAACqZ,GAAD,KACEvZ,EAAAC,EAAAC,cAACsZ,GAAD,CAAiBjL,MAAO,CAAEkL,UAAW,SACnCzZ,EAAAC,EAAAC,cAACiZ,GAAD,CAAQtQ,GAAG,4BAAX,iBACA7I,EAAAC,EAAAC,cAACiZ,GAAD,CAAQtQ,GAAG,iDACT7I,EAAAC,EAAAC,cAACwZ,GAAD,CAAYnL,MAAO,CAAEoL,OAAQ,iBChCtBC,GCnBO,WAAkC,QAAAC,EAAA3Y,UAAAC,OAA9B2Y,EAA8B,IAAAC,MAAAF,GAAAG,EAAA,EAAAA,EAAAH,EAAAG,IAA9BF,EAA8BE,GAAA9Y,UAAA8Y,GACtD,IAAMC,EAAYH,EAAUhL,IAAI,SAAAoL,GAAQ,OAAIC,wBAAcD,KAC1D,OAAO,SAAC9Z,GAaN,OAZwC,SAAAb,GAAA,IAAGQ,EAAHR,EAAGQ,SAAaM,EAAhBb,OAAAC,EAAA,EAAAD,CAAAD,EAAA,qBACtC0a,EAAUG,YACR,SAACC,EAAOC,GAAR,OAAoBA,OAAQlZ,EAAWiZ,IACvCna,wBAAcE,EAAWC,EAAON,MDLxBwa,C1BaQ,SAACla,GAAD,OACtBL,EAAAC,EAAAC,cAACC,EAAA,EAADX,OAAA6R,OAAA,GAAmBhR,EAAnB,CAA0BV,MAAOA,M0BZjC6a,EACAC,EjBT+C,SAAAlb,GAAA,IAAGQ,EAAHR,EAAGQ,SAAH,OAC/CC,EAAAC,EAAAC,cAACkY,EAAA,SAAD,KACEpY,EAAAC,EAAAC,cAAC4K,GAAD,MACC/K,IiBD0B,SAAAR,GAAA,IAAGQ,EAAHR,EAAGQ,SAAH,OAC7BC,EAAAC,EAAAC,cAACwa,EAAA,EAAD,CAAeC,SzBNO,kByBMc5a,IAqBvB6Z,CAVH,WACV,OACE5Z,EAAAC,EAAAC,cAACkY,EAAA,SAAD,KACEpY,EAAAC,EAAAC,cAAC0a,GAAD,MACA5a,EAAAC,EAAAC,cAAC2a,GAAD,MACA7a,EAAAC,EAAAC,cAAC4a,GAAD,SEfAC,GAAcC,QACW,cAA7BrP,OAAOsP,SAASC,UAEe,UAA7BvP,OAAOsP,SAASC,UAEhBvP,OAAOsP,SAASC,SAAShD,MACvB,2DA2CN,SAASiD,GAAgBC,EAAeC,GACtCnQ,UAAUoQ,cACPC,SAASH,GACTtZ,KAAK,SAAA0Z,GACJA,EAAaC,cAAgB,WAC3B,IAAMC,EAAmBF,EAAaG,WACd,MAApBD,IAGJA,EAAiBE,cAAgB,WACA,cAA3BF,EAAiB7V,QACfqF,UAAUoQ,cAAcO,YAI1BjX,QAAQC,IACN,gHAKEwW,GAAUA,EAAOS,UACnBT,EAAOS,SAASN,KAMlB5W,QAAQC,IAAI,sCAGRwW,GAAUA,EAAOU,WACnBV,EAAOU,UAAUP,UAO5BQ,MAAM,SAAAzW,GACLX,QAAQW,MAAM,4CAA6CA,KC/FjE,GAAmD,IAA/CoG,OAAOsP,SAASgB,SAAS5M,Q5BDL,kB4BC8B,CACpD,IAAMpO,G5BFgB,iB4BEC0K,OAAOsP,SAASgB,SACvCtQ,OAAOwM,QAAQ+D,aAAavQ,OAAOwM,QAAQtS,MAAO,GAAI5E,IAGxDkb,IAAStD,OAAO7Y,EAAAC,EAAAC,cAACkc,GAAD,MAASrP,SAASsP,eAAe,SDgB1C,SAAkBhB,GACvB,GAA6C,kBAAmBnQ,UAAW,CAGzE,GADkB,IAAIoR,IAAI1b,iBAAwB+K,OAAOsP,SAAS5B,MACpDkD,SAAW5Q,OAAOsP,SAASsB,OAIvC,OAGF5Q,OAAOC,iBAAiB,OAAQ,WAC9B,IAAMwP,EAAK,GAAAza,OAAMC,iBAAN,sBAEPma,IAgEV,SAAiCK,EAAeC,GAE9CxZ,MAAMuZ,GACHtZ,KAAK,SAAA0a,GAEJ,IAAMC,EAAcD,EAASE,QAAQ3E,IAAI,gBAEnB,MAApByE,EAAS3Y,QACO,MAAf4Y,IAA8D,IAAvCA,EAAYpN,QAAQ,cAG5CnE,UAAUoQ,cAAcqB,MAAM7a,KAAK,SAAA0Z,GACjCA,EAAaoB,aAAa9a,KAAK,WAC7B6J,OAAOsP,SAAS4B,aAKpB1B,GAAgBC,EAAOC,KAG1BW,MAAM,WACLpX,QAAQC,IACN,mEArFAiY,CAAwB1B,EAAOC,GAI/BnQ,UAAUoQ,cAAcqB,MAAM7a,KAAK,WACjC8C,QAAQC,IACN,+GAMJsW,GAAgBC,EAAOC,MCvC/BC","file":"static/js/main.65ad2338.chunk.js","sourcesContent":["import React from 'react'\nimport { ThemeProvider } from 'styled-components/macro'\nimport { wrapDisplayName } from './react'\n\n/* prettier-ignore */\nexport enum MainColors { black = 'black', white = 'white' }\n\nconst values = {\n  bg: MainColors.white,\n  fg: MainColors.black,\n  focus: '#119dff',\n  borderRadius: '0.25rem',\n}\ntype ThemeValues = typeof values\n\nconst functions = {\n  invert: ({ bg, fg, ...values }: ThemeValues) => ({\n    ...functions,\n    ...values,\n    bg: fg,\n    fg: bg,\n  }),\n}\ntype ThemeFunctions = typeof functions\n\nconst theme = { ...values, ...functions }\nexport type Theme = ThemeValues & ThemeFunctions\ntype ThemeArg = { theme: Theme }\n\nexport const Provider = (props: { children: React.ReactChild }) => (\n  <ThemeProvider {...props} theme={theme} />\n)\n\nconst invertProviderFn = (theme: Theme) => theme.invert(theme)\n\nexport const Invert = ({ children }: { children: React.ReactChild }) => (\n  <ThemeProvider theme={invertProviderFn}>{children}</ThemeProvider>\n)\n\nexport const invert = <\n  P extends React.ComponentProps<T>,\n  T extends React.ElementType\n>(\n  Component: T,\n): T => {\n  const Inverted = (props: P) => (\n    <Invert>\n      <Component {...props} />\n    </Invert>\n  )\n\n  /* istanbul ignore else */ if (process.env.NODE_ENV !== 'production') {\n    Inverted.displayName = wrapDisplayName('invert', Component)\n  }\n\n  return Inverted as T\n}\n\nexport const borderRadius = ({ theme }: ThemeArg) => theme.borderRadius\nexport const bg = ({ theme }: ThemeArg) => theme.bg\nexport const fg = ({ theme }: ThemeArg) => theme.fg\n","const API_KEY = process.env.REACT_APP_API_KEY\nconst API_BASE = process.env.REACT_APP_API_BASE\n\nexport const INTERVAL = 1e4 // 10 seconds\nexport const API_URL = `${API_BASE}?api_key=${API_KEY}`\nexport const CURRENCIES = ['GBP', 'EUR', 'USD']\nexport const INITIAL_FUNDS = 100\nexport const BASENAME = '/forex-web-app'\n","export const TIMED_OUT = new Error('Fetch Timeout')\n\ntype Options = RequestInit & { timeout?: number }\n\nconst fetchWithTimeout = (\n  url: RequestInfo,\n  { timeout = 5000, ...options }: Options = {},\n): Promise<Response> =>\n  new Promise((resolve, reject) => {\n    const id = setTimeout(() => reject(TIMED_OUT), timeout)\n    return fetch(url, options).then(\n      res => (clearTimeout(id), resolve(res)), // eslint-disable-line no-sequences\n      err => (clearTimeout(id), reject(err)), // eslint-disable-line no-sequences\n    )\n  })\n\nexport default fetchWithTimeout\n","import { INTERVAL, API_URL } from '../constants'\nimport fetch from '../utils/fetch-with-timeout'\n\ntype Rates = { [key: string]: number }\n\nconst merger = (acc: Rates, [input, rates]: [string, Rates]) => {\n  Object.entries(rates).forEach(([output, rate]) => {\n    if (input === output) return\n    acc[`${input}:${output}`] = rate\n  })\n  return acc\n}\n\nconst fetchRates = async (\n  currencies: string[] = [],\n  timeout: number = INTERVAL / 2,\n) => {\n  if (currencies.length < 2) throw new Error('[400]: less than 2 currencies')\n\n  const list = currencies.join(',')\n  const res = await fetch(`${API_URL}&fsyms=${list}&tsyms=${list}`, { timeout })\n\n  /* istanbul ignore if */\n  if (!res) throw new Error('[600]: empty response')\n\n  /* istanbul ignore if */\n  if (!res.ok) throw new Error(`[${res.status}]: ${await res.text()}`)\n\n  const rates = Object.entries<Rates>(await res.json())\n\n  if (rates.length !== currencies.length) throw new Error('[600]: length error')\n\n  return rates.reduce<Rates>(merger, {})\n}\n\nexport default fetchRates\n","import React, { createContext, useContext, useState } from 'react'\nimport useInterval from 'use-interval'\nimport { Omit } from 'utility-types'\nimport fetchRates from '../api/fetch-rates'\nimport { INTERVAL, CURRENCIES } from '../constants'\n\nconst useForexInterval = (fn: () => void) => useInterval(fn, INTERVAL, true)\nconst logError = (...args: any[]) => !!+console.log(...args)\n\ntype Rates = { [pair: string]: number }\n\n// prettier-ignore\ntype ForexState = { online?: boolean, updated?: number, error?: Error, rates: Rates }\n\n// prettier-ignore\nconst initialState: ForexState = { rates: {}, online: false, updated: -Infinity }\n\nconst createForex = (currencies: string[]) => {\n  const ForexContext = createContext<ForexState>(initialState)\n\n  const useForexState = () => {\n    const { online, updated, error, rates } = useContext(ForexContext)\n    return { online, updated, error, rates, currencies }\n  }\n\n  const useForex = (\n    inputCurrency: string,\n    outputCurrency: string,\n  ): [number, Omit<ReturnType<typeof useForexState>, 'rates'>] => {\n    const { rates, ...state } = useForexState()\n    return [rates[`${inputCurrency}:${outputCurrency}`], state]\n  }\n\n  const useCurrencyForex = (currency: string) => {\n    const { rates: allRates, ...state } = useForexState()\n    const rates = Object.entries(allRates).reduce<Rates>(\n      (rates, [key, rate]) => {\n        const outputKey = key.replace(`${currency}:`, '')\n        if (key !== outputKey) rates[outputKey] = rate\n        return rates\n      },\n      {},\n    )\n    return { rates, ...state }\n  }\n\n  const Provider: React.FunctionComponent = ({ children }) => {\n    const [state, setState] = useState<ForexState>(initialState)\n    // had to replace async / await, it was breaking react tests\n\n    useForexInterval(() => {\n      fetchRates(currencies).then(\n        rates => setState({ rates, online: true, updated: Date.now() }),\n        error => setState({ ...state, online: logError(error), error }),\n      )\n    })\n\n    return (\n      <ForexContext.Provider value={state}>{children}</ForexContext.Provider>\n    )\n  }\n\n  return { Provider, useForex, useForexState, useCurrencyForex }\n}\n\nconst { Provider, ...hooks } = createForex(CURRENCIES)\nconst { useForexState, useCurrencyForex } = hooks\nexport { Provider, useForexState, useCurrencyForex }\nexport default hooks.useForex\n","import Dinero from 'dinero.js'\n\nexport const format = (dinero: Dinero.Dinero) => {\n  const precision = dinero.getPrecision()\n  const format = precision ? `0.${'0'.repeat(precision)}` : '0'\n  return dinero.toFormat(format)\n}\n\nexport const toAmount = (value: number | string, precision = 2): number => {\n  if (typeof value === 'number') return toAmount(value.toFixed(precision))\n  return parseInt(value.replace('.', ''), 10)\n}\n","import { handleActions as handleReduxActions, ReducerMap } from 'redux-actions'\nexport { createAction } from 'redux-actions'\n\nconst mapValues = <M extends { [key: string]: any }, R>(\n  fn: (i: M[keyof M]) => R,\n  obj: M,\n) =>\n  Object.entries(obj).reduce(\n    (acc, [key, value]) => ({ ...acc, [key]: fn(value) }),\n    {} as { [P in keyof M]: R },\n  )\n\nexport const handleActions = <State, Payload = any>(\n  reducerMap: ReducerMap<State, Payload>,\n) => handleReduxActions<State, Payload>(reducerMap, {} as State)\n\ntype ActionCreator<A> = (...args: any[]) => A\n\ntype ActionCreatorsMapObject<A = any> = { [key: string]: ActionCreator<A> }\n\nexport const bindActionCreators = <A, M extends ActionCreatorsMapObject<A>>(\n  actionCreators: M,\n  dispatch: <A>(action: A) => void,\n) =>\n  mapValues(\n    action => (...args: any[]) => dispatch<A>(action(...args)),\n    actionCreators,\n  )\n\nexport { bindActionCreators as bind }\n","import React, { createContext, useContext, useReducer } from 'react'\nimport Dinero from 'dinero.js'\nimport { toAmount } from '../utils/dinero'\nimport { createAction, handleActions, bind } from '../utils/redux'\nimport { CURRENCIES, INITIAL_FUNDS } from '../constants'\n\ntype FundsState = { [key: string]: Dinero.Dinero }\ntype ExchangePayload = { amount: Dinero.Dinero; to: string; rate: number }\n\nconst init = ({\n  currencies,\n  amount = toAmount(INITIAL_FUNDS),\n}: {\n  currencies: string[]\n  amount?: number\n}): FundsState =>\n  currencies.reduce(\n    (a, currency) => ({ ...a, [currency]: Dinero({ amount, currency }) }),\n    {},\n  )\n\n// redux actions and reducer\nconst actions = { exchange: createAction<ExchangePayload>('EXCHANGE') }\n\n// [TODO]: fix action type validation\ntype Actions = { [key in keyof typeof actions]: ReturnType<typeof bind>['x'] }\ntype Pt<T = Dinero.Dinero> = [T, Actions]\n\nconst reducer = handleActions<FundsState, ExchangePayload>({\n  [`${actions.exchange}`]: (state, { payload: { amount, to, rate } }) => {\n    const from = amount.getCurrency()\n    const converted = amount.multiply(rate).getAmount()\n    return {\n      ...state,\n      [from]: state[from].subtract(amount),\n      [to]: state[to].add(Dinero({ amount: converted, currency: to })),\n    }\n  },\n})\n\nconst createPockets = (currencies: string[]) => {\n  const FundsContext = createContext<FundsState>({})\n  const DispatchContext = createContext<() => void>(null as any)\n\n  const Provider: React.FunctionComponent = ({ children }) => {\n    const [funds, dispatch] = useReducer(reducer, { currencies }, init)\n    return (\n      <DispatchContext.Provider value={dispatch as () => void}>\n        <FundsContext.Provider value={funds}>{children}</FundsContext.Provider>\n      </DispatchContext.Provider>\n    )\n  }\n\n  // hooks\n  const useActions = () => bind(actions, useContext(DispatchContext))\n\n  const useFunds = () => useContext(FundsContext)\n  const useFund = (currency: string) => useFunds()[currency]\n\n  const usePockets = (): Pt<FundsState> => [useFunds(), useActions()]\n  const usePocket = (currency: string): Pt => [useFund(currency), useActions()]\n\n  return { Provider, useFund, useFunds, usePocket, usePockets, useActions }\n}\n\nconst { Provider, ...hooks } = createPockets(CURRENCIES)\n\nconst { usePocket, usePockets, useFund, useFunds, useActions } = hooks\nexport { usePocket, usePockets, useFund, useFunds, useActions, Provider }\n","import { fg, bg, MainColors, Theme } from './theme'\n\nconst toRGB = (c: MainColors) => ({ black: '0,0,0', white: '255,255,255' }[c])\n\ntype StyleFn<T = Record<string, any>> = (props: T & { theme: Theme }) => string\ntype StyleFnCurry<T> = (props: T & { theme?: Theme }) => string | StyleFn<T>\n\nconst getFocusSelector = (element: string, within: boolean) =>\n  `${element}:${within ? 'focus-within' : 'focus'}`\n\nconst getFocusCss = (selector: string): StyleFn => ({ theme }) => `\n  outline: none !important;\n  ::-moz-focus-inner { border: 0 }\n  ${selector} { box-shadow: 0 0 0 3px ${theme.focus} }\n`\n\nexport const focus: StyleFnCurry<{\n  element?: string\n  within?: boolean\n  selector?: string\n}> = ({\n  theme,\n  element = '&',\n  within = false,\n  selector = getFocusSelector(element, within),\n}) => {\n  const getter = getFocusCss(selector)\n  return theme ? getter({ theme }) : getter\n}\n\nexport const base: StyleFn = ({ theme }) => `\n  --bg-rgb: ${toRGB(bg({ theme }))};\n  --fg-rgb: ${toRGB(fg({ theme }))};\n  background: ${bg({ theme })};\n  color: ${fg({ theme })};\n`\n","import React, { Fragment } from 'react'\nimport { createGlobalStyle } from 'styled-components/macro'\nimport { fg } from '../utils/theme'\nimport { base } from '../utils/style'\n\nconst GlobalStyle = createGlobalStyle`\n  :root, body, #root { ${base} height: 100%; }\n  :root, body { background: ${fg}; }\n`\n\nexport const Provider: React.FunctionComponent = ({ children }) => (\n  <Fragment>\n    <GlobalStyle />\n    {children}\n  </Fragment>\n)\n","import { useState, useEffect, useCallback } from 'react'\n\nconst getOnlineStatus = () => {\n  return !(typeof navigator !== 'undefined' && navigator.onLine === false)\n}\n\nconst useOnlineStatus = () => {\n  const [onlineStatus, setOnlineStatus] = useState(getOnlineStatus)\n  const goOnline = useCallback(() => setOnlineStatus(true), [setOnlineStatus])\n  const goOffline = useCallback(() => setOnlineStatus(false), [setOnlineStatus])\n\n  useEffect(() => {\n    window.addEventListener('online', goOnline)\n    window.addEventListener('offline', goOffline)\n    return () => {\n      window.removeEventListener('online', goOnline)\n      window.removeEventListener('offline', goOffline)\n    }\n  }, [goOnline, goOffline])\n\n  return onlineStatus\n}\n\nexport default useOnlineStatus\n","import styled from 'styled-components/macro'\n\nconst Container = styled.div`\n  width: 100%;\n  max-width: 44rem;\n  padding: 0 1rem;\n  margin: 0 auto;\n`\n\nexport default Container\n","import React from 'react'\nimport styled from 'styled-components/macro'\nimport { base } from '../utils/style'\nimport Container from './Container'\n\nconst Wrapper = styled.header`\n  ${base}\n`\n\ntype Props = { paddingBottom?: string | number }\ntype Component = React.FunctionComponent<Props>\n\nconst getPaddingBottom = ({ paddingBottom = '' }: Props) => paddingBottom\n\nconst Title = styled.h1<Props>`\n  font-size: 1.5rem;\n  line-height: 1.5rem;\n  font-weight: 700;\n  text-transform: lowercase;\n  padding: 1rem 0 ${getPaddingBottom};\n`\n\nconst SectionHeader: Component = ({ children, paddingBottom, ...props }) => (\n  <Wrapper {...props}>\n    <Container>\n      <Title paddingBottom={paddingBottom}>{children}</Title>\n    </Container>\n  </Wrapper>\n)\n\nexport default SectionHeader\n","import React, { useEffect } from 'react'\nimport styled from 'styled-components/macro'\nimport { invert, fg, borderRadius } from '../utils/theme'\nimport useOnlineStatus from '../hooks/online'\nimport { useForexState } from '../hooks/forex'\nimport SectionHeader from './SectionHeader'\n\nconst Flex = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n`\n\nconst Badge = styled.div`\n  border: 1px solid ${fg};\n  border-radius: ${borderRadius};\n  font-size: 0.75rem;\n  line-height: 1.25rem;\n  padding: calc(0.125rem - 1px) calc(0.25rem + 3px);\n  flex: 0 0 auto;\n`\n\nconst $root = document.querySelector('#root')\n\nconst NavBar = () => {\n  const browserOnline = useOnlineStatus()\n  const { online: forexOnline } = useForexState()\n  const online = browserOnline && forexOnline\n  useEffect(() => {\n    /* istanbul ignore if */\n    if ($root) return $root.classList[online ? 'remove' : 'add']('offline')\n  }, [online])\n  return (\n    <SectionHeader paddingBottom={0}>\n      <Flex>\n        <div>Forex Web App</div>\n        {!online && <Badge>{browserOnline ? 'loading...' : 'offline'}</Badge>}\n      </Flex>\n    </SectionHeader>\n  )\n}\n\nexport default invert(NavBar)\n","import React from 'react'\nimport styled from 'styled-components/macro'\nimport { borderRadius } from '../utils/theme'\nimport { base, focus } from '../utils/style'\n\nconst Wrapper = styled.label`\n  ${base}\n  ${focus({ within: true })}\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  position: relative;\n  overflow: hidden;\n  line-height: 1.5rem;\n  border-radius: ${borderRadius};\n  padding: 0 0.5rem;\n  margin-left: -0.5rem;\n  flex: 0 0 auto;\n`\n\nconst Field = styled.select`\n  border-radius: 0;\n  font-size: 1rem;\n  display: block;\n  appearance: none;\n  border: none;\n  opacity: 0;\n  position: absolute;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  cursor: pointer;\n`\n\nconst Value = styled.div`\n  font-weight: 600;\n  margin: 0.5rem 0.5rem 0.5rem 0;\n`\n\nconst ChevronSVG = styled.svg<{ size: number }>`\n  width: ${p => p.size}px;\n  height: ${p => p.size}px;\n  fill: none;\n  flex: 0 0 auto;\n`\n\nconst Chevron = ({ size = 16, strokeWidth = 1.5, color = 'currentColor' }) => (\n  <ChevronSVG viewBox='0 0 16 16' size={size}>\n    <path stroke={color} strokeWidth={strokeWidth} d='M4 6l4 4 4-4' />\n  </ChevronSVG>\n)\n\ntype SelectProps = React.ComponentProps<typeof Field>\nconst Select = ({ style, className, ...props }: SelectProps) => (\n  <Wrapper style={style} className={className}>\n    <Value>{props.value}</Value>\n    <Field {...props} />\n    <Chevron />\n  </Wrapper>\n)\n\nexport default Select\n","import React from 'react'\nimport { CURRENCIES } from '../../constants'\nimport Select from '../Select'\n\nconst CurrencySelector = ({ currencies = CURRENCIES, ...props }) => (\n  <Select {...props}>\n    {currencies.map(currency => (\n      <option key={currency} value={currency} children={currency} />\n    ))}\n  </Select>\n)\n\nexport default CurrencySelector\n","import React, { useState, useEffect, forwardRef } from 'react'\nimport { Rifm } from 'rifm'\n\nconst cleanup = (str: string) => str.replace(/[^\\d.]+/g, '')\nconst isEquivalent = (a: string, b: string) => cleanup(a) === cleanup(b)\n\n// source: https://github.com/istarkov/rifm/blob/9b8960715/docs/format.js#L20\nexport const format = (str: string) => {\n  const clean = cleanup(str)\n\n  const beautify =\n    clean.indexOf('.') === -1\n      ? clean.length > 2\n        ? `${clean.substr(0, clean.length - 2)}.${clean.substr(-2)}`\n        : clean\n      : `${clean.split('.')[0]}.${clean.split('.')[1].substr(0, 2)}`\n\n  const r = parseFloat(beautify)\n\n  if (Number.isNaN(r)) return '0.00'\n\n  return r.toLocaleString('en-US', {\n    minimumFractionDigits: 2,\n    maximumFractionDigits: 2,\n    useGrouping: false,\n  })\n}\n\ntype Event = { target: { value: string } } | React.ChangeEvent<HTMLInputElement>\n\ntype InputFormatterProps = {\n  value: string\n  onChange: (e: Event) => void\n  children: (\n    args: Parameters<React.ComponentProps<typeof Rifm>['children']>[0],\n    ref: React.Ref<any>,\n  ) => React.ReactNode\n}\nconst InputFormatter = forwardRef(\n  ({ value, onChange, children }: InputFormatterProps, ref) => {\n    const [text, setText] = useState(value)\n\n    useEffect(() => {\n      isEquivalent(text, value) || onChange({ target: { value: text } })\n    }, [text]) // eslint-disable-line react-hooks/exhaustive-deps\n\n    useEffect(() => {\n      isEquivalent(text, value) || setText(format(value))\n    }, [value]) // eslint-disable-line react-hooks/exhaustive-deps\n\n    return (\n      <Rifm\n        value={text}\n        onChange={setText}\n        refuse={/[^\\d.]/g}\n        format={format}\n        children={props => children(props, ref)}\n      />\n    )\n  },\n)\n\nexport default InputFormatter\n","import React from 'react'\nimport styled from 'styled-components/macro'\nimport { invert, borderRadius } from '../../utils/theme'\nimport { base } from '../../utils/style'\nimport Container from '../Container'\nimport CurrencySelector from './CurrencySelector'\nimport InputFormatter from './InputFormatter'\n\nconst Wrapper = styled.div`\n  ${base}\n  padding: 1.5rem 0;\n  width: 100%;\n`\n\nconst StyledContainer = styled(Container)`\n  display: flex;\n  justify-content: space-between;\n`\n\nconst RelativeWrapper = styled.div`\n  position: relative;\n  flex: 1 1 auto;\n  margin-left: 1rem;\n`\n\nconst Input = styled.input`\n  ${base}\n  display: block;\n  width: 100%;\n  outline: none;\n  appearance: none;\n  caret-color: currentColor;\n  padding: 0;\n  text-align: right;\n  border: 0px solid transparent;\n  border-radius: ${borderRadius};\n  font-size: 2rem;\n  line-height: 2.5rem;\n  font-weight: 500;\n  letter-spacing: -0.025em;\n  font-family: inherit;\n  text-transform: uppercase;\n  text-indent: 0;\n  font-variant-numeric: tabular-nums;\n`\n\nconst Prefix = styled(Input)`\n  background: transparent;\n  pointer-events: none;\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n`\n\nconst Transparent = styled.span`\n  color: transparent;\n  user-select: none;\n`\ntype InputLineProps = {\n  currency: string\n  setCurrency: React.ChangeEventHandler<HTMLSelectElement>\n  form: any\n  prefix?: string\n  ['data-testid']?: string\n}\nconst InputLine: React.FunctionComponent<InputLineProps> = ({\n  currency,\n  setCurrency,\n  prefix,\n  form,\n  ...props\n}) => (\n  <Wrapper {...props}>\n    <StyledContainer>\n      <CurrencySelector value={currency} onChange={setCurrency} />\n      <InputFormatter {...form}>\n        {(input, ref) => (\n          <RelativeWrapper>\n            <Input {...form} {...input} maxLength={10} ref={ref} />\n            <Prefix as='div'>\n              {prefix} <Transparent>{input.value}</Transparent>\n            </Prefix>\n          </RelativeWrapper>\n        )}\n      </InputFormatter>\n    </StyledContainer>\n  </Wrapper>\n)\n\nInputLine.defaultProps = { prefix: '−' }\n\nconst OutputLine = invert(InputLine)\nOutputLine.defaultProps = { prefix: '+' }\n\nexport { InputLine, OutputLine }\n\n/* istanbul ignore else */ if (process.env.NODE_ENV !== 'production') {\n  InputLine.defaultProps['data-testid'] = 'InputLine'\n  OutputLine.defaultProps['data-testid'] = 'OutputLine'\n}\n","import React from 'react'\nimport styled from 'styled-components/macro'\nimport { fg, borderRadius } from '../../utils/theme'\nimport { base, focus } from '../../utils/style'\nimport Container from '../Container'\n\nconst gap = '0.375rem'\nconst border = '1px solid'\nconst fontSize = '0.75rem'\n\nconst Wrapper = styled.button`\n  ${base}\n  ${focus}\n  appearance: none;\n  cursor: pointer;\n  font-family: inherit;\n  padding: 0 ${gap};\n  display: flex;\n  border: ${border} ${fg};\n  border-radius: ${borderRadius};\n  align-items: center;\n`\n\nconst Icon = ({ color = 'currentColor', strokeWidth = 2, ...props }) => (\n  <svg\n    viewBox='0 0 24 24'\n    fill='none'\n    stroke={color}\n    strokeWidth={strokeWidth}\n    {...props}\n  >\n    <polyline points='16 3 21 3 21 8' />\n    <line x1='4' y1='20' x2='21' y2='3' />\n    <polyline points='21 16 21 21 16 21' />\n    <line x1='15' y1='15' x2='21' y2='21' />\n    <line x1='4' y1='4' x2='9' y2='9' />\n  </svg>\n)\n\nconst StyledIcon = styled(Icon)`\n  height: ${fontSize};\n  width: ${fontSize};\n  margin: ${gap} 0;\n  display: block;\n  flex: 0 0 auto;\n`\n\nconst Rate = styled.div`\n  font-weight: 500;\n  font-size: ${fontSize};\n  line-height: 1rem;\n  padding: 0.25rem 0 0.25rem ${gap};\n  border-left: ${border} ${fg};\n  margin-left: ${gap};\n  flex: 0 0 auto;\n`\n\ntype DOMProps = React.ComponentProps<typeof Wrapper>\ntype FlipButtonProps = DOMProps & { rate?: number }\n\nconst FlipButton = ({ rate, ...props }: FlipButtonProps) => {\n  if (typeof rate !== 'number') return null\n  return (\n    <Wrapper type='button' {...props}>\n      <StyledIcon />\n      <Rate>{rate}</Rate>\n    </Wrapper>\n  )\n}\n\n/* istanbul ignore else */ if (process.env.NODE_ENV !== 'production') {\n  FlipButton.defaultProps = { 'data-testid': 'FlipButton' }\n}\n\nconst AbsoluteButton = styled(FlipButton)`\n  position: absolute;\n  transform: translate(-2px, -50%);\n`\n\nFlipButton.Absolute = ({ className, style, ...props }: FlipButtonProps) => (\n  <Container className={className} style={style}>\n    <AbsoluteButton {...props} />\n  </Container>\n)\n\nexport default FlipButton\n","import React from 'react'\nimport styled from 'styled-components/macro'\nimport { fg, invert } from '../../utils/theme'\nimport { base, focus } from '../../utils/style'\nimport Container from '../Container'\n\nconst Wrapper = styled.button`\n  ${base}\n  ${focus}\n  margin-bottom: 0.5rem\n  appearance: none;\n  display: block;\n  width: 100%;\n  font-size: 1rem;\n  line-height: 1.5rem;\n  border: solid ${fg};\n  border-width: 1px 0;\n  border-radius: 0;\n  padding: calc(0.25rem - 1px) 0;\n  cursor: ${p => (p.disabled ? 'default' : 'pointer')};\n`\n\nconst Main = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0.5rem 0;\n`\n\nconst Content = styled.div`\n  font-weight: 600;\n`\n\nconst Return = ({ size = 20, strokeWidth = 1.75, color = 'currentColor' }) => (\n  <svg\n    viewBox='0 0 24 24'\n    width={size}\n    height={size}\n    strokeWidth={strokeWidth}\n    fill='none'\n    stroke={color}\n  >\n    <path d='M9 10l-5 5 5 5' />\n    <path d='M20 4v7a4 4 0 0 1-4 4H4' />\n  </svg>\n)\n\ntype SubmitButtonProps = React.ComponentProps<typeof Wrapper>\nconst SubmitButton = ({ children, ...props }: SubmitButtonProps) => (\n  <Wrapper type='submit' {...props}>\n    <Container>\n      <Main>\n        <Content>{children}</Content>\n        <Return />\n      </Main>\n    </Container>\n  </Wrapper>\n)\n\nexport default invert(SubmitButton)\n","import React, { useReducer, useEffect, useRef } from 'react'\nimport Dinero from 'dinero.js'\nimport { Action } from 'redux-actions'\nimport { invert } from '../../utils/theme'\nimport { handleActions } from '../../utils/redux'\nimport { toAmount, format } from '../../utils/dinero'\nimport useOnlineStatus from '../../hooks/online'\nimport useForex from '../../hooks/forex'\nimport { usePocket } from '../../hooks/pockets'\nimport { InputLine, OutputLine } from './Inputs'\nimport FlipButton from './FlipButton'\nimport Button from './SubmitButton'\n\ntype Source = 'input' | 'output'\ntype State = {\n  source: Source\n  rate: number\n  input: Dinero.Dinero\n  output: Dinero.Dinero\n}\n\ntype SourcePayload = { value: string | number }\ntype FocusPayload = { source: Source }\ntype ForexPayload = { rate: number }\ntype InputPayload = { value: string | number; rate?: number }\ntype PayloadTypes = SourcePayload | FocusPayload | ForexPayload | InputPayload\ntype ActionTypes = Action<PayloadTypes>\ntype Dispatch = React.Dispatch<ActionTypes>\n\ntype Reducer = (state: State, action: ActionTypes) => State\nconst reducer: Reducer = handleActions<State>({\n  focus: (state, { payload: { source } }: Action<FocusPayload>) => {\n    return { ...state, source }\n  },\n  input: (\n    { rate: r },\n    { payload: { value, rate = r } }: Action<InputPayload>,\n  ) => {\n    const input = Dinero({ amount: toAmount(value) })\n    const output = input.multiply(rate)\n    return { source: 'input', rate, input, output }\n  },\n  output: (\n    { rate: r },\n    { payload: { value, rate = r } }: Action<InputPayload>,\n  ) => {\n    const output = Dinero({ amount: toAmount(value) })\n    const input = output.divide(rate)\n    return { source: 'output', rate, input, output }\n  },\n  forex: (\n    { source, [source]: dinero },\n    { payload: { rate } }: Action<ForexPayload>,\n  ) => {\n    return reducer({ rate } as State, {\n      type: source,\n      payload: { value: format(dinero) },\n    })\n  },\n})\n\nconst init = ({ value, rate }: { value: number; rate: number }) =>\n  reducer({ rate, source: 'input' } as State, {\n    type: 'input',\n    payload: { value },\n  })\n\nconst useForexInput = (type: Source, state: State, dispatch: Dispatch) => ({\n  ref: useRef<HTMLInputElement>(null),\n  value: format(state[type]),\n  onChange: (e: any) => dispatch({ type, payload: { value: e.target.value } }),\n  onFocus: () => dispatch({ type: 'focus', payload: { source: type } }),\n})\n\nconst useForexForm = (initialValue: number, rate: number = 0) => {\n  const initialState = { value: initialValue, rate }\n  const [state, dispatch] = useReducer(reducer, initialState, init)\n\n  useEffect(() => {\n    /* istanbul ignore if */\n    if (typeof rate !== 'number') return\n    dispatch({ type: 'forex', payload: { rate } })\n  }, [rate])\n\n  const forms = {\n    input: useForexInput('input', state, dispatch),\n    output: useForexInput('output', state, dispatch),\n  }\n\n  const reset = (value = initialValue) => {\n    dispatch({ type: 'input', payload: { value, rate } })\n    const { current: element } = forms[state.source].ref\n    /* istanbul ignore else */\n    if (element) element.focus()\n  }\n\n  type ForexForm = [State['input'], typeof reset, typeof forms]\n  return [state.input, reset, forms] as ForexForm\n}\n\nconst usePrevious = (value: any) => {\n  const ref = useRef<any>()\n  useEffect(() => {\n    ref.current = value\n  })\n  return ref.current\n}\n\ntype HTMLInputRef = { ref: React.RefObject<HTMLInputElement> }\n\nconst selectRef = ({ current }: HTMLInputRef['ref']) => {\n  /* istanbul ignore if */\n  if (!current) return\n  current.focus()\n  current.select()\n}\n\nconst useFocus = (\n  { input, output }: { input: HTMLInputRef; output: HTMLInputRef },\n  { from, to }: { from: string; to: string },\n) => {\n  const previousFrom = usePrevious(from)\n  const previousTo = usePrevious(to)\n\n  useEffect(() => {\n    if (previousFrom !== from) return selectRef(input.ref)\n    if (previousTo !== to) return selectRef(output.ref)\n  }, [from, to, input.ref, output.ref, previousFrom, previousTo])\n}\n\ntype ExchangeFormProps = {\n  initialAmount?: number\n  from: string\n  to: string\n  setFrom: (arg: React.ChangeEvent<HTMLSelectElement> | string) => void\n  setTo: (arg: React.ChangeEvent<HTMLSelectElement> | string) => void\n}\n\nconst ExchangeForm = (props: ExchangeFormProps) => {\n  const { initialAmount = 0, from, setFrom, to, setTo, ...other } = props\n  const browserOnline = useOnlineStatus()\n  const [rate, { online: forexOnline, error }] = useForex(from, to)\n  const [requested, reset, forms] = useForexForm(initialAmount, rate)\n  const [available, { exchange }] = usePocket(from)\n  const overdraft = requested.getAmount() > available.getAmount()\n  const online = browserOnline && forexOnline\n  const enabled = online && !error && !overdraft && requested.getAmount() > 0\n\n  useFocus(forms, props)\n\n  const handleSubmit = (event: React.FormEvent<HTMLFormElement>) => {\n    event.preventDefault()\n    if (!enabled) return\n    const amount = Dinero({ amount: requested.getAmount(), currency: from })\n    exchange({ to, amount, rate })\n    reset()\n  }\n\n  const flip = (event: React.MouseEvent<HTMLButtonElement>) => {\n    event.preventDefault()\n    const current = { to, from }\n    setTo(current.from)\n    setFrom(current.to)\n  }\n\n  return (\n    <form {...other} onSubmit={handleSubmit}>\n      <InputLine currency={from} setCurrency={setFrom} form={forms.input} />\n      <FlipButton.Absolute rate={rate} onClick={flip} />\n      <OutputLine currency={to} setCurrency={setTo} form={forms.output} />\n      <Button disabled={!enabled}>\n        {overdraft ? 'OVERDRAFT!' : 'exchange'}\n      </Button>\n    </form>\n  )\n}\n\n/* istanbul ignore else */ if (process.env.NODE_ENV !== 'production') {\n  ExchangeForm.defaultProps = { 'data-testid': 'ExchangeForm' }\n}\n\nexport default invert(ExchangeForm)\n","import React from 'react'\nimport styled from 'styled-components/macro'\nimport Dinero from 'dinero.js'\nimport { Link } from 'react-router-dom'\nimport { Invert, fg, borderRadius } from '../../utils/theme'\nimport { base, focus } from '../../utils/style'\nimport { format } from '../../utils/dinero'\nimport { useCurrencyForex } from '../../hooks/forex'\n\nconst padding = `calc(1rem - 0.5px) calc(0.5rem - 1px)`\n\nexport const Wrapper = styled.div`\n  border-radius: ${borderRadius};\n  border: 1px solid ${fg};\n`\n\nconst Flex = styled.div`\n  ${base}\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n`\n\nconst Currency = styled.h3`\n  font-size: 1rem;\n  line-height: 1.5rem;\n  font-weight: 600;\n  padding: ${padding};\n`\n\nconst Amount = styled.div`\n  font-weight: 400;\n  font-size: 1.5rem;\n  line-height: 1.5rem;\n  padding: ${padding};\n  letter-spacing: -0.025rem;\n`\n\nconst ForexGroup = styled(Flex)`\n  border-bottom-left-radius: ${borderRadius};\n  border-bottom-right-radius: ${borderRadius};\n`\n\nconst ForexWrapper = styled(Flex)`\n  ${focus}\n  text-decoration: none;\n  overflow: hidden;\n  position: relative;\n  & + &::before {\n    content: '';\n    position: absolute;\n    width: 1px;\n    height: 100%;\n    background: ${fg};\n    pointer-events: none;\n  }\n  &:first-of-type {\n    border-bottom-left-radius: ${borderRadius};\n  }\n  &:last-of-type {\n    border-bottom-right-radius: ${borderRadius};\n  }\n  &:focus {\n    z-index: 1;\n  }\n`\n\nconst ForexCurrency = styled.div`\n  padding: ${padding};\n  font-size: 0.75rem;\n  line-height: 1rem;\n  font-weight: 600;\n`\nconst ForexRate = styled.div`\n  padding: ${padding};\n  font-size: 0.875rem;\n  line-height: 1rem;\n`\n\ntype HeaderDOMProps = React.ComponentType<typeof Flex>\ntype HeaderProps = { currency: string; amount: string } & HeaderDOMProps\nconst Header = ({ currency, amount, ...props }: HeaderProps) => (\n  <Invert>\n    <Flex {...props}>\n      <Currency>{currency}</Currency>\n      <Amount>{amount}</Amount>\n    </Flex>\n  </Invert>\n)\n\n/* istanbul ignore else */ if (process.env.NODE_ENV !== 'production') {\n  Header.defaultProps = { 'data-testid': 'PocketCardHeader' }\n}\ntype ForexProps = { from: string; to: string; rate?: number }\nconst Forex = ({ from, to, rate }: ForexProps) => (\n  <ForexWrapper as={Link} to={`/exchange/${from}x${to}`}>\n    <ForexCurrency>{to}</ForexCurrency>\n    <ForexRate>{rate}</ForexRate>\n  </ForexWrapper>\n)\ntype PocketCardDOMProps = React.ComponentProps<typeof Wrapper>\ntype TestProps = { ['data-testid']?: string }\ntype PocketCardProps = { fund: Dinero.Dinero } & PocketCardDOMProps & TestProps\nconst PocketCard = ({ fund, ...props }: PocketCardProps) => {\n  const formatted = format(fund)\n  const currency = fund.getCurrency()\n  const { rates } = useCurrencyForex(currency)\n  /* istanbul ignore else */ if (process.env.NODE_ENV !== 'production') {\n    props['data-testid'] = props['data-testid'] || `PocketCard-${currency}`\n  }\n  return (\n    <Wrapper {...props}>\n      <Header currency={currency} amount={formatted} />\n      {!!rates && (\n        <ForexGroup>\n          {Object.entries(rates).map(([to, rate]) => (\n            <Forex key={to} from={currency} to={to} rate={rate} />\n          ))}\n        </ForexGroup>\n      )}\n    </Wrapper>\n  )\n}\n\nexport default PocketCard\n","import React from 'react'\nimport styled from 'styled-components/macro'\nimport { base } from '../../utils/style'\nimport { usePockets } from '../../hooks/pockets'\nimport Container from '../Container'\nimport SectionHeader from '../SectionHeader'\nimport PocketCard, { Wrapper as CardWrapper } from './Card'\n\nconst Wrapper = styled.div`\n  ${base}\n  padding-top: 2rem;\n`\n\nconst Row = styled.div`\n  margin: 0 -1rem;\n  overflow: scroll;\n  display: flex;\n  flex-wrap: no-wrap;\n  /* prettier-ignore */\n  &::before, &::after { content: ''; flex: 0 0 0.25rem; }\n  /* [HACK]: scrollbar hacking, ideally would use a wrapper to hide it */\n  overflow-scrolling: touch;\n  -webkit-overflow-scrolling: touch;\n  scrollbar-width: none;\n  scrollbar-height: none;\n  -ms-overflow-style: none;\n  &::-webkit-scrollbar {\n    width: 0;\n    height: 0;\n  }\n  /* [TODO]: add expand/collapse button to SectionHeader */\n  & > ${CardWrapper} {\n    margin: 0.5rem 0.75rem;\n    min-width: 13rem;\n    flex: 0 0 auto;\n  }\n`\n\nconst Pockets = (props: React.ComponentProps<typeof Wrapper>) => {\n  const [funds] = usePockets()\n  return (\n    <Wrapper {...props}>\n      <SectionHeader>Pockets</SectionHeader>\n      <Container>\n        <Row>\n          {Object.entries(funds).map(([currency, fund]) => (\n            <PocketCard key={currency} fund={fund} />\n          ))}\n        </Row>\n      </Container>\n    </Wrapper>\n  )\n}\n\n/* istanbul ignore else */ if (process.env.NODE_ENV !== 'production') {\n  Pockets.defaultProps = { 'data-testid': 'Pockets' }\n}\n\nexport default Pockets\n","import React from 'react'\nimport styled from 'styled-components/macro'\nimport { invert } from '../utils/theme'\nimport { base } from '../utils/style'\n\nconst Wrapper = styled.div`\n  ${base}\n  font-feature-settings: 'kern', 'liga', 'pnum', 'lnum', 'zero';\n  font-size: 33vmin;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex: 1;\n`\n\nconst ErrorPage = ({ children = 404 }) => <Wrapper>{children}</Wrapper>\n\nexport default invert(ErrorPage)\n","import React, { Fragment } from 'react'\nimport { Switch, Route, Redirect, RouteComponentProps } from 'react-router-dom'\nimport { CURRENCIES } from '../constants'\nimport Exchange from './Exchange'\nimport Pockets from './Pockets'\nimport ErrorPage from './ErrorPage'\n\nconst currencyRegex = CURRENCIES.join('|')\nconst exchangePath = `/exchange/:from(${currencyRegex})x:to(${currencyRegex})`\n\ntype ExchangeRouteProps = RouteComponentProps<{ from: string; to: string }>\ntype EventOrString = React.ChangeEvent<HTMLSelectElement> | string\nconst get = (e: EventOrString) => (typeof e === 'string' ? e : e.target.value)\n\nconst renderExchange = ({ match: { params }, history }: ExchangeRouteProps) => {\n  const actions = {\n    setFrom: (e: EventOrString) => {\n      const to = get(e) === params.to ? params.from : params.to\n      history.replace(`/exchange/${get(e)}x${to}`)\n    },\n    setTo: (e: EventOrString) => {\n      const from = get(e) === params.from ? params.to : params.from\n      history.replace(`/exchange/${from}x${get(e)}`)\n    },\n  }\n  return (\n    <Fragment>\n      <Exchange {...params} {...actions} />\n      <Pockets />\n    </Fragment>\n  )\n}\n\nconst Routes = () => (\n  <Switch>\n    <Route sensitive exact strict path={exchangePath} render={renderExchange} />\n    <Redirect exact from='/' to='/exchange/GBPxEUR' />\n    <Route render={() => <ErrorPage />} />\n  </Switch>\n)\n\nexport default Routes\n","import React from 'react'\nimport styled from 'styled-components/macro'\nimport { borderRadius } from '../utils/theme'\nimport { base, focus } from '../utils/style'\nimport Container from './Container'\n\ntype BaseProps = { className?: string; style?: React.CSSProperties }\n\ntype IconProps = { size?: number; color?: string } & BaseProps\n\nconst GitHubIcon = ({\n  size = 24,\n  color = 'currentColor',\n  style,\n  ...props\n}: IconProps) => (\n  <svg\n    width={size}\n    height={size}\n    viewBox='0 0 24 24'\n    fill={color}\n    {...props}\n    style={{ display: 'block', ...style }}\n  >\n    <path\n      fillRule='evenodd'\n      clipRule='evenodd'\n      d='M12 0C5.37 0 0 5.37 0 12C0 17.31 3.435 21.795 8.205 23.385C8.805 23.49 9.03 23.13 9.03 22.815C9.03 22.53 9.015 21.585 9.015 20.58C6 21.135 5.22 19.845 4.98 19.17C4.845 18.825 4.26 17.76 3.75 17.475C3.33 17.25 2.73 16.695 3.735 16.68C4.68 16.665 5.355 17.55 5.58 17.91C6.66 19.725 8.385 19.215 9.075 18.9C9.18 18.12 9.495 17.595 9.84 17.295C7.17 16.995 4.38 15.96 4.38 11.37C4.38 10.065 4.845 8.985 5.61 8.145C5.49 7.845 5.07 6.615 5.73 4.965C5.73 4.965 6.735 4.65 9.03 6.195C9.99 5.925 11.01 5.79 12.03 5.79C13.05 5.79 14.07 5.925 15.03 6.195C17.325 4.635 18.33 4.965 18.33 4.965C18.99 6.615 18.57 7.845 18.45 8.145C19.215 8.985 19.68 10.05 19.68 11.37C19.68 15.975 16.875 16.995 14.205 17.295C14.64 17.67 15.015 18.39 15.015 19.515C15.015 21.12 15 22.41 15 22.815C15 23.13 15.225 23.505 15.825 23.385C20.565 21.795 24 17.295 24 12C24 5.37 18.63 0 12 0Z'\n    />\n  </svg>\n)\n\ntype LinkProps = { to: string } & BaseProps\nconst Link: React.FunctionComponent<LinkProps> = ({ to, ...props }) => {\n  const other = { target: '_blank', rel: 'noopener noreferrer' }\n  return <a {...props} {...other} href={to} children={props.children} />\n}\n\nconst Wrapper = styled.div`\n  ${base}\n  padding: 1.5rem 0;\n  margin-top: auto;\n`\n\nconst StyledContainer = styled(Container)`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n`\n\nconst Anchor = styled(Link)`\n  ${focus}\n  display: block;\n  text-decoration: none;\n  color: currentColor;\n  margin: -0.5rem;\n  padding: 0.5rem;\n  border-radius: ${borderRadius};\n  font-weight: 500;\n`\n\nconst Footer = () => (\n  <Wrapper>\n    <StyledContainer style={{ marginTop: 'auto' }}>\n      <Anchor to='https://leonardodino.com'>leonardo dino</Anchor>\n      <Anchor to='https://github.com/leonardodino/forex-web-app'>\n        <GitHubIcon style={{ margin: '0.25rem' }} />\n      </Anchor>\n    </StyledContainer>\n  </Wrapper>\n)\n\nexport default Footer\n","import React, { Fragment } from 'react'\nimport { BrowserRouter } from 'react-router-dom'\nimport { wrapIn } from '../utils/react'\nimport { Provider as ThemeProvider } from '../utils/theme'\nimport { Provider as ForexProvider } from '../hooks/forex'\nimport { Provider as PocketsProvider } from '../hooks/pockets'\nimport { Provider as StyleProvider } from './GlobalStyle'\nimport NavBar from './NavBar'\nimport Routes from './Routes'\nimport Footer from './Footer'\nimport { BASENAME } from '../constants'\n\nconst CustomRouter: React.FC = ({ children }) => (\n  <BrowserRouter basename={BASENAME}>{children}</BrowserRouter>\n)\n\nconst enhance = wrapIn(\n  ThemeProvider,\n  PocketsProvider,\n  ForexProvider,\n  StyleProvider,\n  CustomRouter,\n)\n\nconst App = () => {\n  return (\n    <Fragment>\n      <NavBar />\n      <Routes />\n      <Footer />\n    </Fragment>\n  )\n}\n\nexport default enhance(App)\nexport { App as BareApp }\n","import { createElement, createFactory } from 'react'\n\ntype Component<T = {}> = React.ElementType<T> | string\n\nexport const getDisplayName = (Component: Component) => {\n  if (typeof Component === 'string') return Component\n  if (!Component) return undefined\n  return Component.displayName || Component.name || 'Component'\n}\n\nexport const wrapDisplayName = (fnName: string, Component: Component) =>\n  `${fnName}(${getDisplayName(Component)})`\n\ntype AnyComponent<T = any> = React.ComponentType<T>\n\nexport const wrapIn = (...Providers: AnyComponent[]) => {\n  const factories = Providers.map(provider => createFactory(provider as any))\n  return (Component: AnyComponent): AnyComponent => {\n    const WrapIn: React.FunctionComponent = ({ children, ...props }) =>\n      factories.reduceRight(\n        (child, factory) => factory(undefined, child),\n        createElement(Component, props, children),\n      )\n\n    /* istanbul ignore else */ if (process.env.NODE_ENV !== 'production') {\n      const providerNames = Providers.map(getDisplayName).join(', ')\n      const displayName = getDisplayName(Component)\n      WrapIn.displayName = `wrapIn(${providerNames})(${displayName})`\n    }\n\n    return WrapIn\n  }\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\n/* istanbul ignore file */\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,\n    ),\n)\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void\n  onUpdate?: (registration: ServiceWorkerRegistration) => void\n}\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href)\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config)\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA',\n          )\n        })\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config)\n      }\n    })\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing\n        if (installingWorker == null) {\n          return\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.',\n              )\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration)\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.')\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration)\n              }\n            }\n          }\n        }\n      }\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error)\n    })\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type')\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload()\n          })\n        })\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config)\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.',\n      )\n    })\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister()\n    })\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport 'minireset.css'\nimport './index.css'\nimport App from './components/App'\nimport { BASENAME } from './constants'\nimport * as serviceWorker from './service-worker'\n\nif (window.location.pathname.indexOf(BASENAME) !== 0) {\n  const url = BASENAME + window.location.pathname\n  window.history.replaceState(window.history.state, '', url)\n}\n\nReactDOM.render(<App />, document.getElementById('root'))\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.register()\n"],"sourceRoot":""}